"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[779],{88725:function(e,t,n){n.d(t,{Z:function(){return C}});var a=n(27378),r=n(68442),o=n(55336),c=n(92371),l=n(10796),i=n(25252),s=n(6284),m=n(51663),u=e=>{var{event:t,assetUri:n,assetTitle:a,metadata:r}=e;return{container:"Comments",label:t,variant:"",metadata:r,source:(null==n?void 0:n.split("/")[1])||"",url:a}};function d(e,t,n,a,r,o,c){try{var l=e[o](c),i=l.value}catch(s){return void n(s)}l.done?t(i):Promise.resolve(i).then(a,r)}var v=["sport"],f=(0,r.default)("p",{target:"ec5dr224",label:"MessageContainer"})(o.eV," margin:",c.SPACING_2," 0;"),h=(0,r.default)(f,{target:"ec5dr223",label:"EnvironmentWarningHeader"})({name:"hwfcu5",styles:"color:red"}),p=(0,r.default)("iframe",{target:"ec5dr222",label:"StylediFrame"})("width:200px;min-width:100%;overflow:hidden;",(e=>{var{minHeight:t}=e;return t&&"min-height: 36px"}),";"),g=(0,r.default)("span",{target:"ec5dr221",label:"IconContainer"})({name:"1bo2wjz",styles:"display:inline-block;width:1rem;height:1rem;vertical-align:-0.125em"}),E=(0,r.default)("div",{target:"ec5dr220",label:"CommentsAnchor"})("position:relative;top:-",c.SPACING_4,";"),w=function(){var e,t=(e=function*(e){return(0,i.G)(e)},function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){d(o,a,r,c,l,"next",e)}function l(e){d(o,a,r,c,l,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),b=()=>a.createElement(f,null,a.createElement(g,null,a.createElement(s.Z,{type:"labels:warning"})),"Â There was a problem loading the comments. Please try again."),_=()=>a.createElement(h,null,"You are viewing a live comments forum, do not post, reply or rate comments!"),C=e=>{var{assetUri:t,assetTitle:n,meta:{env:r,host:o,location:c}}=e,s=null==t?void 0:t.split("/")[1],d=v.includes(s),f="comments",h="comp-comments-button",g=c.hash==="#".concat(f)||c.hash==="#".concat(h),C="live"!==r?(0,l.Ph)(c.search,"morph_env"):null,T="live"!==r?(0,l.Ph)(c.search,"renderer_env"):null,S="https://".concat(o).concat(t),[y,A]=(0,a.useState)(!1),[k,P]=(0,a.useState)(!1),[U,L]=(0,a.useState)(!1),[R,H]=(0,a.useState)(0),[N,D]=(0,a.useState)(!0),[I,x]=(0,a.useState)(1),[O,F]=(0,a.useState)(!1),G=(0,a.useRef)(null),V=(0,a.useRef)(null),Y=()=>{x(I+1),P(!1),A(!0)};(0,a.useEffect)((()=>{var e=setTimeout((()=>{!y&&d&&A(!0)}),1e3);return()=>clearTimeout(e)}),[]),(0,a.useEffect)((()=>{var e=u({event:"comments-component",assetUri:t,assetTitle:n,metadata:{ANC:g}});window.Reverb?w(e):setTimeout((()=>{w(e)}),2e3)}),[t,n,g]),(0,a.useEffect)((()=>{g&&A(!0)}),[g]);var Z,B="".concat("localhost"===r?"https://www.test.bbc.co.uk/":"/","comments/embed").concat(t,"?embeddingPageUri=").concat(S,"%23").concat(f,"&embeddingPageTitle=").concat(encodeURIComponent(n)).concat(C?"&morph_env=".concat(C):"").concat(T?"&renderer_env=".concat(T):"");return Z=(0,a.useCallback)((e=>{var a,{commentsIFrameHeight:r,commentsErrorCode:o,commentsScrollToTop:c}=e.data;r&&(0===R&&(null==G||null===(a=G.current)||void 0===a||a.focus()),H("".concat(r,"px")));o&&(w(u({event:"comments-component-error",assetUri:t,assetTitle:n,metadata:{ANC:g,HSC:o,TRY:I-1}})),P(!0),A(!1)),c&&V.current.scrollIntoView(),F(!0)}),[R,n,t,g,I]),(0,a.useEffect)((()=>(window.addEventListener("message",Z),()=>window.removeEventListener("message",Z))),[Z]),(0,a.useEffect)((()=>{var e=y&&0===R,t=e||!y;L(e),D(t)}),[y,R,U]),a.createElement(a.Fragment,null,a.createElement(E,{id:f,ref:V}),a.createElement(E,{id:h}),a.createElement("div",{"aria-live":"polite"},"live"===C&&a.createElement(_,null),!d&&N&&a.createElement(i.f,{tracking:u({event:"view-comments",assetUri:t,assetTitle:n,metadata:{ANC:g,TRY:I}})},(e=>{var{trackRef:t}=e;return a.createElement(m.Z,{iconType:U?"playback-avkx:loading":"participate:comments",trackRef:t,onClick:Y},"View comments")})),k&&a.createElement(b,null),y&&a.createElement(p,{src:B,title:"Comments",height:R,ref:G,scrolling:"no",minHeight:O&&d})))}}}]);