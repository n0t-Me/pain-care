"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2726],{37844:function(e,t,n){n.d(t,{Z:function(){return V}});var r=n(64404),a=n(68442),i=n(10043),o=n(87062),l=n(27378),u=n(6284),d=n(44381),c=n(63178),s={localhostError:"MediaPlayer is not available on localhost. Try localhost.bbc.com"},p={default:{NO_JS_REASON:"This video can not be played",NO_JS_MESSAGE:"To play this video you need to enable JavaScript in your browser."},cy:{NO_JS_REASON:"Methu chwarae'r fideo",NO_JS_MESSAGE:"I wylio'r fideo yma, mae'n rhaid galluogi JavaScript yn y porwr."},gd:{NO_JS_REASON:"Cha ghabh am bhideo seo cluiche",NO_JS_MESSAGE:"Feumar cead a thoirt do JavaScript sa bhrabhsair agad 'son am bhideo fhaicinn."}},m=n(44401),v=()=>m.Z&&window.location.hostname,y=n(86594),f=n(25040),h=n(33866),g=n(74868);function b(e,t,n,r,a,i,o){try{var l=e[i](o),u=l.value}catch(d){return void n(d)}l.done?t(u):Promise.resolve(u).then(r,a)}var w,E={playing:"started",pause:"paused",playlistEnded:"ended"},P=Object.keys(E),O=function(){var e,t=(e=function*(e){var{uasClient:t,smpEventName:n,currentTime:r,hostname:a,activityData:i}=e;if(P.includes(n)&&(e=>(null==e?void 0:e.resourceDomain)&&(null==e?void 0:e.resourceId)&&(null==e?void 0:e.resourceType)&&(null==e?void 0:e.actionContext)&&(null==e?void 0:e.url))(i)&&(0,h.Z)()&&(0,g.w$)()){var o=(0,y.Z)().withAction(E[n]).withResourceDomain(i.resourceDomain).withResourceId(i.resourceId).withResourceType(i.resourceType).withActionContext("".concat(i.actionContext,"#").concat(Math.floor(r))).withUrl("https://".concat(a).concat(i.url)).build();try{yield t.post(o)}catch(l){console.error(l)}}},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){b(i,r,a,o,l,"next",e)}function l(e){b(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),A=n(46438);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t,n,r,a,i,o){try{var l=e[i](o),u=l.value}catch(d){return void n(d)}l.done?t(u):Promise.resolve(u).then(r,a)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){j(i,r,a,o,l,"next",e)}function l(e){j(i,r,a,o,l,"throw",e)}o(void 0)}))}}var _=["initialised","continuousPlay.play","continuousPlayCountdownStarted","playing","pause","ended","fullscreenEnter","fullscreenExit","playlistEnded","playlistStopped","mediaItemChanged","enterFakeFullscreen","exitFakeFullscreen"],D=(0,a.default)("div",{target:"e1h75hkw4",label:"MediaPlayerWrapper"})(""),F=(0,a.default)("div",{target:"e1h75hkw3",label:"MediaContainer"})((e=>{var{fixedHeight:t}=e;return 0!==t&&"height: ".concat(t,";")}),";padding-bottom:",(e=>{var{aspectRatioPadding:t,fixedHeight:n}=e;return 0===n?"".concat(t,"%"):"0px"}),";position:relative;width:100%;color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";background-color:",(e=>{var{theme:t}=e;return t.colourPalette.midground}),";html.no-js &{display:none;}",(e=>{var t,n,{isInFakeFullscreen:r}=e;return r&&(0,i.iv)(w||(t=["\n      z-index: 9999;\n    "],n||(n=t.slice(0)),w=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))))}),";"),C=(0,a.default)("div",{target:"e1h75hkw2",label:"MediaInner"})({name:"hku1gd",styles:"position:absolute;width:100%;height:100%;display:flex;align-items:center;justify-content:center"}),N=(0,a.default)("div",{target:"e1h75hkw1",label:"Error"})({name:"19997jf",styles:"display:flex;justify-content:center;align-items:center;padding:32px"}),L=(0,a.default)("div",{target:"e1h75hkw0",label:"LogoIconWrapper"})("width:30%;display:flex;color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";opacity:0.2;"),R=function(){var e=k((function*(e){if(!e.isAdvertisingEnabled)return!1;var t=e=>e.items.some((e=>e.isAdvertisingAllowed)),n=t(e),r=e.continuousPlay&&e.continuousPlay.mediaList&&e.continuousPlay.mediaList.some(t);return!(!n&&!r)&&(window.dotcom&&!window.dotcom.ads&&(yield new Promise((e=>setTimeout(e,200)))),window.dotcom&&window.dotcom.ads&&(yield window.dotcom.ads.enabled()))}));return function(t){return e.apply(this,arguments)}}(),I=e=>{var{analytics:t}=e;return t&&t.page?t.page.name:void 0},J=e=>{var{idType:t}=e;return"serviceID"===t||void 0},M=e=>{var{items:t,analytics:n}=e;if(n){var{page:{destination:r,producer:a}}=n;return 0===t.length?{destination:r,producer:a}:{clipPID:t[0].id,destination:r,producer:a}}},U=e=>e?"allowed":void 0,K=(e,t)=>{var n=e.items[0];if(n){var{id:r,idType:a="vpid",live:i,holdingImageUrl:o,title:l,duration:u,durationFormatted:d,kind:c,guidance:s,isEmbeddingAllowed:p,isAdvertisingAllowed:m,authToken:v}=n,y=[{[a]:r,kind:c,live:i,duration:u,jwtToken:v}];return t&&m&&y.unshift({kind:"advert"}),{title:l,holdingImageURL:o,guidance:s,date:d,embedRights:U(p),items:y,simulcast:J(n)}}},Z=e=>{var{media:t,onwardJourneyOptions:n,hasAds:r}=e;if(t.continuousPlay&&t.continuousPlay.mediaList&&t.continuousPlay.mediaList.length>1)return((e,t,n)=>({html:"name:onwardJourney.js",data:{name:"smp.plugin.continuousplay.playlistSetChanged",data:x({items:e.map((e=>({playlist:K(e,n),counterName:I(e),statsObject:M(e)})))},t)}}))(t.continuousPlay.mediaList,n,r)},B=e=>{var{hasAds:t,initialAdTag:n}=e;if(t)return{html:"name:dfpAds.js",data:{name:"AdsPluginParameters",data:{adTag:n}}}},H=e=>{var{unmutePluginEnabled:t}=e;return t?{html:d}:void 0},G=e=>{var{enableFullScreenPlugin:t}=e;return t?{html:c}:void 0},z=e=>{var{player:t,onBumpStateChanged:n,hasAds:r,setIsInFakeFullscreen:a}=e;_.forEach((e=>{t.bind(e,(t=>n({name:e,data:t})))}));var i=!1;if(t.bind("showCta",(()=>{i||(i=!0,window.performance.mark("media-player-ready-to-play"))})),t.bind("initialised",(()=>window.performance.mark("media-player-initialised"))),t.bind("enterFakeFullscreen",(()=>a(!0))),t.bind("exitFakeFullscreen",(()=>a(!1))),r){var o=function(){var e=k((function*(){var e=yield window.dotcom.ads.getAdTag();t.dispatchEvent("bbc.smp.plugins.ads.event.updateAdTag",{adTag:e})}));return function(){return e.apply(this,arguments)}}();t.bind("playlistLoaded",(()=>{o()}))}},W=e=>{var t=e.items.find((e=>e.adCampaignKeyword));return t?t.adCampaignKeyword:null},Q=e=>{var t=(0,l.useRef)(e),n=(0,l.useRef)();return(0,l.useEffect)((()=>{if(t.current=e,e||(n.current=null),e&&!n.current){var r=(null==e?void 0:e.environment)||"live",a=null==e?void 0:e.apiKey;n.current=((e,t,n)=>e&&t&&n?(0,f.Z)({apiKey:n,environment:e,activityType:"plays",isDotCom:t.endsWith(".com"),tokenRefreshToggle:!0}):null)(r,v(),a)}}),[e]),[n,t]},V=e=>{var{media:t,uiOptions:n={},onwardJourneyOptions:a={},height:i=0,onStateChanged:d,onMediaChanged:c,shouldAutoplay:m,orientation:y="landscape",shouldDelayEmbed:f=!1,shouldPauseMedia:h=!1,forcePlaceholder:g=!1,activityData:b,experimentalShouldAutoPlayMuted:w=!1,shouldFullscreen:E,enableFullScreenPlugin:P}=e,S=(0,l.useRef)(),T=(0,l.useRef)();T.current=d;var j=(0,r.V)("//emp.bbci.co.uk/emp/bump-4/bump-4"),_=(0,o.Qg)(),J=(0,l.useRef)(t.currentlyPlayingKey),U=(0,l.useRef)(t.isAdvertisingEnabled),[V,$]=Q(b),[q,X]=(0,l.useState)(!1),Y=100*("portrait"===y?16/9:9/16),ee=w,te=p[_]||p.default,ne="localhost"===v(),re=(0,l.useMemo)((()=>ne?l.createElement(N,null,s.localhostError):null),[ne]),ae=(0,l.useRef)();return m&&ae.current&&ae.current.captureIntent(),(0,l.useEffect)((()=>{if(j&&!re&&!g&&!ae.current){var e=e=>{var n,{name:r,data:a}=e;$.current&&O({uasClient:V.current,smpEventName:r,currentTime:null==ae||null===(n=ae.current)||void 0===n||null===(n=n.player)||void 0===n?void 0:n.currentTime(),hostname:v(),activityData:$.current});var i="continuousPlay.play"===r,o=a&&void 0!==a.index,l=t.continuousPlay&&t.continuousPlay.mediaList&&t.continuousPlay.mediaList.length>1;i&&o&&l&&(J.current=t.continuousPlay.mediaList[a.index].key,c&&c({index:a.index})),T.current&&T.current({name:r,data:a})},r=function(){var r=k((function*(){var r=yield R(t);if(r){var i=W(t);window.dotcom.setConfig("adCampaign",i)}var o=r?yield window.dotcom.ads.getAdTag():void 0,l=x(x({},n),{},{locale:x({lang:_},n.locale)});ae.current=j.player(S.current,(e=>{var t,n,{media:r,uiOptions:a,onwardJourneyOptions:i,hasAds:o,initialAdTag:l,unmutePluginEnabled:u,shouldDelayEmbed:d,enableFullScreenPlugin:c}=e;return{product:"generic",plugins:{toLoad:(n={media:r,onwardJourneyOptions:i,hasAds:o,initialAdTag:l,unmutePluginEnabled:u,enableFullScreenPlugin:c},[Z(n),B(n),H(n),G(n)].filter(Boolean))},enableToucan:r.isToucanEnabled||!1,playlistObject:K(r,o),ui:a,statsObject:M(r),counterName:I(r),externalEmbedCode:r.externalEmbedUrl?'<iframe width="400" height="500" frameborder="0" src="{url}"></iframe>':void 0,externalEmbedUrl:r.externalEmbedUrl,appName:r.smpAppName,appType:null!==(t=r.smpAppType)&&void 0!==t?t:"responsive",mediator:r.mediator,muted:u,delayEmbed:d,webcastData:r.webcastData,supportFakeFullscreen:!0}})({media:t,uiOptions:l,onwardJourneyOptions:a,hasAds:r,initialAdTag:o,unmutePluginEnabled:ee,shouldDelayEmbed:f,enableFullScreenPlugin:P})),z({player:ae.current,onBumpStateChanged:e,hasAds:r,setIsInFakeFullscreen:X}),ae.current.load()}));return function(){return r.apply(this,arguments)}}();r()}}),[t,n,j,re,a,c,_,g,$,V,ee,f,E,P]),(0,l.useEffect)((()=>{if(!re&&ae.current){var e=J.current!==t.currentlyPlayingKey,r=U.current!==t.isAdvertisingEnabled;if(e||r){var a=function(){var e=k((function*(){var e=yield R(t);ae.current.loadPlaylist(K(t,e),{autoplay:m,counterName:I(t),statsObject:M(t),externalEmbedUrl:t.externalEmbedUrl,webcastData:t.webcastData}),J.current=t.currentlyPlayingKey,U.current=t.isAdvertisingEnabled}));return function(){return e.apply(this,arguments)}}();a(),ae.current.updateUiConfig(n)}else((e,t)=>{var{externalEmbedUrl:n}=e.settings();t&&t!==n&&e.settings({externalEmbedUrl:t})})(ae.current,t.externalEmbedUrl);var i=function(){var e=k((function*(){if(yield R(t)){var e=W(t);window.dotcom.setConfig("adCampaign",e)}}));return function(){return e.apply(this,arguments)}}();i()}}),[re,t,m,n]),(0,l.useEffect)((()=>{!re&&ae.current&&h&&ae.current.pause()}),[re,h]),(0,l.useEffect)((()=>{E&&ae.current.dispatchEvent("fullScreenPlugin.launchFullscreen")}),[E]),(0,l.useEffect)((()=>{var e=e=>e.preventDefault();return q&&window.addEventListener("touchmove",e,{passive:!1}),()=>{window.removeEventListener("touchmove",e,{passive:!1})}}),[q]),l.createElement(D,{"data-chromatic":"ignore"},l.createElement(F,{fixedHeight:i,isInFakeFullscreen:q,"data-testid":"media-player-container-".concat(y),aspectRatioPadding:Y},l.createElement(C,{ref:S},re,!re&&l.createElement(L,{"data-testid":"bbc-logo-wrapper"},l.createElement(u.Z,{type:"logo:bbc"})))),l.createElement("noscript",null,l.createElement(A.Z,{reason:te.NO_JS_REASON,message:te.NO_JS_MESSAGE,headingLevel:"2",collapseAtMobile:!0})))}}}]);