"object"!==typeof DotmetricsJSON&&(DotmetricsJSON=window.JSON);(function(){function B(z){this.foundVideoPlayers=[];this.SearchForNewVideoPlayersInterval=5E3;this.newVideoFoundCallback=z;this.init=function(){this.trackVideos()};this.trackVideos=function(){function a(a){a.contentWindow&&c.searchForVideosInWindow(a.contentWindow)}this.searchForVideosInWindow(window);for(var b=window.document.getElementsByTagName("iframe"),c=this,d=0;d<b.length;d++)a(b[d]);c=this;setTimeout(function(){c.trackVideos()},this.SearchForNewVideoPlayersInterval)};this.searchForVideosInWindow=
function(a){try{a.jwplayer}catch(b){return}this.searchForFlowPlayerPlayersInWindow(a);this.searchForJWPlayerPlayersInWindow(a);this.searchForVideoJSPlayersInWindow(a)};this.searchForFlowPlayerPlayersInWindow=function(a){if(a.flowplayer){var b=[],c=0;if("undefined"!=typeof a.flowplayer.instances)for(a.flowplayer.instances.forEach(function(a){b.push(a)}),c=0;c<b.length;c++)0>this.foundVideoPlayers.indexOf(b[c])&&(this.foundVideoPlayers.push(b[c]),this.newVideoFoundCallback("flowPlayer",a.flowplayer.version,
b[c]))}};this.searchForJWPlayerPlayersInWindow=function(a){if(a.jwplayer){var b=[];for(c=0;a.jwplayer(c)&&a.jwplayer(c).id;)b.push(a.jwplayer(c)),c++;for(var c=0;c<b.length;c++){a=!0;for(var d=0;d<this.foundVideoPlayers.length;d++)this.foundVideoPlayers[d].id&&this.foundVideoPlayers[d].id==b[c].id&&(a=!1);a&&(this.foundVideoPlayers.push(b[c]),this.newVideoFoundCallback("jwPlayer",b[c].version,b[c]))}}};this.searchForVideoJSPlayersInWindow=function(a){if(a.videojs&&"object"==typeof a.videojs.players)for(videoId in a.videojs.players){var b=
a.videojs.players[videoId];b&&0>this.foundVideoPlayers.indexOf(b)&&(this.foundVideoPlayers.push(b),this.newVideoFoundCallback("videojs",a.videojs.VERSION,b))}}}function C(z){this.formPostCount=this.pingSendCount=this.dataSendCount=0;this.callLimit=10;this.SettingsObject=z;this.isRegExp=function(a){return"[object RegExp]"==Object.prototype.toString.call(a)};this.setCookie=function(a,e,f,g){var d=new Date;d.setDate(d.getDate()+f);g&&d.setMinutes(d.getMinutes()+g);e=escape(e)+(null==f?"":"; expires="+
d.toUTCString());document.cookie=a+"="+e+";path=/;secure;"};this.getCookie=function(a){return this.hasCookie(a)?this.listCookie()[a+""]:null};this.hasCookie=function(a){return(new RegExp("(?:;\\s*|^)"+encodeURIComponent(a+"")+"=")).test(document.cookie)};this.lsAvailable=function(){try{var a=window.localStorage;a.setItem("__storage_test__","__storage_test__");a.removeItem("__storage_test__");return!0}catch(e){return!1}};this.listCookie=function(a){for(var d=document.cookie.split(";"),f,g={},b=0,c=
d.length;b<c;++b)if(f=d[b].split("="),f[0]=f[0].replace(/^\s+|\s+$/,""),!this.isRegExp(a)||a.test(f[0]))try{g[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}catch(p){}return g};this.sendData=function(a,e){var d=window.DotMetricsSettings;switch(a){case d.DataUrl:this.dataSendCount++;if(this.dataSendCount>this.callLimit)return;break;case d.PingUrl:if(this.pingSendCount++,this.pingSendCount>this.callLimit)return}e=this.encode(DotmetricsJSON.stringify(e));e=encodeURIComponent(e);d=(new Date).getTime();
a=a+"?v="+e+"&r="+d;e=document.createElement("script");e.setAttribute("src",a);(document.getElementsByTagName("head")[0]||document.head||document.body).appendChild(e)};this.performAjaxPost=function(a,e){e=this.encode(DotmetricsJSON.stringify(e));e=encodeURIComponent(e);var d=(new Date).getTime();e="v="+e+"&r="+d;a+="?"+(new Date).getTime();window.XDomainRequest?(d=new XDomainRequest,d.open("POST",a),d.send(e)):(d=null,window.XMLHttpRequest?d=new XMLHttpRequest:window.ActiveXObject&&(d=new ActiveXObject("Microsoft.XMLHTTP")),
d.open("POST",a,!0),d.withCredentials=!0,d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(e))};this.performSendBeacon=function(a,e){this.sendMessageToExtension({target:"dotmetrics-extension",type:"beacon",url:a,data:e});e=this.encode(DotmetricsJSON.stringify(e));e=encodeURIComponent(e);var d=(new Date).getTime();e=new Blob(["v="+e+"&r="+d],{type:"application/x-www-form-urlencoded"});try{return A.boundBeacon(a,e)}catch(g){return!1}};this.addEventSimple=function(a,e,f){a.addEventListener?
a.addEventListener(e,f,!1):a.attachEvent&&a.attachEvent("on"+e,f)};this.removeEventSimple=function(a,e,f){a.removeEventListener?a.removeEventListener(e,f,!1):a.detachEvent&&a.detachEvent("on"+e,f)};this.isIE=function(){return-1!=navigator.appName.indexOf("Microsof")?!0:!1};this.saveInLocalStorage=function(a){if(this.lsAvailable())for(var d in a)a.hasOwnProperty(d)&&window.localStorage.setItem(d+"",a[d])};this.getFromLocalStorage=function(a){return this.lsAvailable()?window.localStorage.getItem(a+
""):null};this.removeFromLocalStorage=function(a){return this.lsAvailable()?window.localStorage.removeItem(a+""):null};this.sortByProperty=function(a,e,f){return a.sort(function(a,d){return a[e]<d[e]?"asc"===f?1:-1:a[e]>[e]?"asc"===f?-1:1:0})};this.CreateElement=function(a,e,f){if(null!=a){a=document.createElement(a);if(null!=e)for(x in e)"function"==typeof e[x]?this.addEventSimple(a,x,e[x]):(a.setAttribute(x,e[x]),"class"==x&&(a.className=e[x]));null!=f&&(e=document.createTextNode(f.toString()),
a.appendChild(e));return a}return null!=f?document.createTextNode(f.toString()):null};this.experimentalFP=this.clientInfoTimingData=this.clientInfo=null;this.createClientInfo=function(a){function d(){l=w.detect(g[h])?l+"1":l+"0";h++;h>=g.length?(b.FontString=l,t.clientInfo=b,n=(new Date).getTime()-n,t.clientInfoTimingData.fontInfoTime=n,t.runExperimentalFP(a)):setTimeout(function(){d()},30)}if(this.clientInfo)a&&a();else{this.clientInfoTimingData={};var f=(new Date).getTime(),g="cursive;monospace;serif;sans-serif;fantasy;Arial;Arial Black;Arial Narrow;Arial Rounded MT Bold;Bookman Old Style;Bradley Hand ITC;Century;Century Gothic;Comic Sans MS;Courier;Courier New;Georgia;Gentium;Impact;King;Lucida Console;Lalit;Modena;Monotype Corsiva;Papyrus;Tahoma;TeX;Times;Times New Roman;Trebuchet MS;Verdana;Verona;Bell MT;Berlin Sans FB;Corbel;Kalinga;Miriam Regular;Modern Standard;Segoe UI;Segoe Print;Inconsolata;Droid Sans Mono;Anonymous Pro;Liberation Mono;Terminus;Rosario;Roboto Slab;Oswald;Stalemate;Crimson Text;Gravitas One;Jura;League Gothic;Fjord;Proxima Nova;Trivia Grotesk;Pluto Sans;Museo Sans;Futura;Al Bayan;American Typewriter;Andale Mono;Apple Casual;Apple Chancery;Apple Garamond;Apple Gothic;Apple LiGothic;Apple LiSung;Apple Myungjo;Apple Symbols;.AquaKana;Arial Hebrew;Ayuthaya;Baghdad;Baskerville;Beijing;BiauKai;Big Caslon;Brush Script;Chalkboard;Chalkduster;Charcoal;Charcoal CY;Chicago;Cochin;Comic Sans;Cooper;Copperplate;Corsiva Hebrew;DecoType Naskh;Devanagari;Didot;Euphemia UCAS;Fang Song;Gadget;Geeza Pro;Geezah;Geneva;Geneva CY;Gill Sans;Gujarati;Gung Seoche;Gurmukhi;Hangangche;HeadlineA;Hei;Helvetica;Helvetica CY;Helvetica Neue;Herculanum;Hiragino Kaku Gothic Pro;Hiragino Kaku Gothic ProN;Hiragino Kaku Gothic Std;Hiragino Kaku Gothic StdN;Hiragino Maru Gothic Pro;Hiragino Maru Gothic ProN;Hiragino Mincho Pro;Hiragino Mincho ProN;Hoefler Text;Inai Mathi;Jung Gothic;Kai;Keyboard;Krungthep;KufiStandard GK;LastResort;LiHei Pro;LiSong Pro;Lucida Grande;Marker Felt;Menlo;Monaco;Monaco CY;Mshtakan;Nadeem;New Peninim;New York;NISC GB18030;Optima;Osaka;Palatino;PC Myungjo;Pilgiche;Plantagenet Cherokee;Raanana;Sand;Sathu;Seoul;Shin Myungjo Neue;Silom;Skia;Song;ST FangSong;ST Heiti;ST Kaiti;ST Song;Symbol;Tae Graphic;Taipei;Techno;Textile;Thonburi;Times CY;Zapf Chancery;Zapf Dingbats;Zapfino;Abadi MT Condensed Light;Aharoni;Aldhabi;Andalus;Angsana New;AngsanaUPC;Aparajita;Arabic Typesetting;Arial Nova;Batang;BatangChe;Book Antiqua;Browallia New;BrowalliaUPC;Calibri;Calibri Light;Calisto MT;Cambria;Cambria Math;Candara;Consolas;Constantia;Copperplate Gothic Bold;Copperplate Gothic Light;Cordia New;CordiaUPC;DaunPenh;David;Dengxian;DFKai-SB;DilleniaUPC;DokChampa;Dotum;DotumChe;Ebrima;Estrangelo Edessa;EucrosiaUPC;Euphemia;FangSong;Franklin Gothic Medium;FrankRuehl;FreesiaUPC;Gabriola;Gadugi;Gautami;Georgia Pro;Gill Sans Nova;Gisha;Gulim;GulimChe;Gungsuh;GungsuhChe;IrisUPC;Iskoola Pota;JasmineUPC;KaiTi;Kartika;Khmer UI;KodchiangUPC;Kokila;Lao UI;Latha;Leelawadee;Leelawadee UI;Levenim MT;LilyUPC;Lucida Handwriting Italic;Lucida Sans Unicode;Malgun Gothic;Mangal;Manny ITC;Marlett;Meiryo;Meiryo UI;Microsoft Himalaya;Microsoft JhengHei;Microsoft JhengHei UI;Microsoft New Tai Lue;Microsoft PhagsPa;Microsoft Sans Serif;Microsoft Tai Le;Microsoft Uighur;Microsoft YaHei;Microsoft YaHei UI;Microsoft Yi Baiti;MingLiU, PMingLiU;MingLiU-ExtB, PMingLiU-ExtB;MingLiU_HKSCS;MingLiU_HKSCS-ExtB;Miriam, Miriam Fixed;Mongolian Baiti;MoolBoran;MS Gothic, MS PGothic;MS Mincho, MS PMincho;MS UI Gothic;MV Boli;Myanmar Text;Narkisim;Neue Haas Grotesk Text Pro;News Gothic MT;Nirmala UI;NSimSun;Nyala;Palatino Linotype;Raavi;Rockwell Nova;Rod;Sakkal Majalla;Sanskrit Text;Segoe MDL2 Assets;Segoe Script;Segoe UI v5.00[3];Segoe UI v5.01[4];Segoe UI v5.27[5];Segoe UI v5.35;Segoe UI Emoji;Segoe UI Historic[6];Segoe UI Symbol;Shonar Bangla;Shruti;SimHei;SimKai;Simplified Arabic;SimSun;SimSun-ExtB;Sitka Banner;Sitka Display;Sitka Heading;Sitka Small;Sitka Subheading;Sitka Text;Sylfaen;Traditional Arabic;Tunga;Urdu Typesetting;Utsaah;Vani;Verdana Pro;Vijaya;Vrinda;Webdings;Westminster;Wingdings;Yu Gothic;Yu Gothic UI;Yu Mincho;Abyssinica SIL;Bitstream Charter;Century Schoolbook L;Courier 10 Pitch;DejaVu Sans;DejaVu Sans Condensed;DejaVu Sans Light;DejaVu Sans Mono;DejaVu Serif;DejaVu Serif Condensed;Dingbats;Droid Arabic Kufi;Droid Arabic Naskh;Droid Naskh Shift Alt;Droid Sans;Droid Sans Arabic;Droid Sans Armenian;Droid Sans Ethiopic;Droid Sans Fallback;Droid Sans Georgian;Droid Sans Hebrew;Droid Sans Japanese;Droid Serif;FreeMono;FreeSans;FreeSerif;Gargi;Garuda;KacstArt;KacstBook;KacstDecorative;KacstDigital;KacstFarsi;KacstLetter;KacstNaskh;KacstOffice;KacstOne;KacstPen;KacstPoster;KacstQurn;KacstScreen;KacstTitle;KacstTitleL;Kedage;Khmer OS;Khmer OS System;Kinnari;Laksaman;Liberation Sans;Liberation Sans Narrow;Liberation Serif;LKLUG;Lohit Bengali;Lohit Devanagari;Lohit Gujarati;Lohit Punjabi;Lohit Tamil;Loma;Mallige;Meera;mry_KacstQurn;Mukti Narrow;NanumBarunGothic;NanumGothic;NanumMyeongjo;Nimbus Mono L;Nimbus Roman No9 L;Nimbus Sans L;Norasi;OpenSymbol;Padauk;Padauk Book;Phetsarath OT;Pothana2000;Purisa;Rachana;Rekha;Saab;Sawasdee;STIX;STIXGeneral;TakaoPGothic;Tibetan Machine Uni;Tlwg Typist;Tlwg Typo;TlwgMono;TlwgTypewriter;Ubuntu;Ubuntu Condensed;Ubuntu Light;Ubuntu Mono;Umpush;URW Bookman L;URW Chancery L;URW Gothic L;URW Palladio L;utkal;Vemana2000;Waree;WenQuanYi Micro Hei;WenQuanYi Micro Hei Mono;Academy Engraved LET;Apple Color Emoji;AppleGothic;Bangla Sangam MN;Bodoni 72;Bodoni 72 Oldstyle;Bodoni 72 Smallcaps;Bodoni Ornaments;Bradley Hand;Chalkboard SE;Devanagari Sangam MN;Gujarati Sangam MN;Gurmukhi MN;Heiti SC;Heiti TC;Kailasa;Kannada Sangam MN;Malayalam Sangam MN;Marion;Noteworthy;Oriya Sangam MN;Party LET;Sinhala Sangam MN;Snell Roundhand;Tamil Sangam MN;Telugu Sangam MN".split(";"),
b={};b.AppCodeName=window.navigator.appCodeName;b.AppName=window.navigator.appName;b.Version=window.navigator.appVersion;b.Language=window.navigator.language;b.Platform=window.navigator.platform;b.Product=window.navigator.product;b.ProductSub=window.navigator.productSub;b.UserAgent=window.navigator.userAgent;b.Vendor=window.navigator.vendor;b.VendorSub=window.navigator.vendorSub;b.BuildId=window.navigator.buildID;b.OsCpu=window.navigator.oscpu;b.Screen={};b.Screen.AvailableWidth=window.screen.availWidth;
b.Screen.AvailableHeight=window.screen.availHeight;b.Screen.PixelDepth=window.screen.pixelDepth;b.Screen.ColorDepth=window.screen.colorDepth;var c=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;b.Screen.Width=Math.round(window.screen.width*c);b.Screen.Height=Math.round(window.screen.height*c);null==b.Screen.Width&&(b.Screen.Width=b.Screen.AvailableWidth);null==b.Screen.Height&&(b.Screen.Height=b.Screen.AvailableHeight);b.Plugins=[];if(window.ActiveXObject){c=/[0-9]+/;
var p={flash:"ShockwaveFlash.ShockwaveFlash",pdf:"AcroPDF.PDF",silverlight:"AgControl.AgControl",quicktime:"QuickTime.QuickTime"};for(q in p){var k=this.msieDetect(p[q]);k&&(k=(k=c.exec(k))&&k[0]||"",k={},k.Name=p[q],k.FileName="",b.Plugins.push(k))}}else for(var h=0;h<window.navigator.plugins.length;h++){var q=window.navigator.plugins[h];c={};c.Name=q.name;c.FileName=q.filename;b.Plugins.push(c)}b.MimeTypes=[];for(h=0;q=window.navigator.mimeTypes[h];h++)c={},c.Type=q.type,c.Suffixes=q.suffixes,b.MimeTypes.push(c);
f=(new Date).getTime()-f;this.clientInfoTimingData.basicInfoTime=f;f=(new Date).getTime();b.Canvas=this.CreateCanvasFP();f=(new Date).getTime()-f;this.clientInfoTimingData.canvasInfoTime=f;var l="",w=new function(){var a=["monospace","sans-serif","serif"],d=document.getElementsByTagName("body")[0],e=document.createElement("span");e.style.fontSize="72px";e.innerHTML="mmmmmmmmmmlli";var b={},f={},g;for(g in a)e.style.fontFamily=a[g],d.appendChild(e),b[a[g]]=e.offsetWidth,f[a[g]]=e.offsetHeight,d.removeChild(e);
this.detect=function(g){var c=!1,h;for(h in a){e.style.fontFamily=g+","+a[h];d.appendChild(e);var q=e.offsetWidth!=b[a[h]]||e.offsetHeight!=f[a[h]];d.removeChild(e);c=c||q}return c}},t=this;h=0;var n=(new Date).getTime();setTimeout(function(){d()},20)}};this.runExperimentalFP=function(a){var d=this;this.experimentalFP={};this.experimentalFP.hasLocalStorage=this.lsAvailable();this.runMediaDeviceInfo(function(){d.createAudioFp("sine",function(){setTimeout(d.createAudioFp("square",function(){setTimeout(d.createAudioFp("sawtooth",
function(){setTimeout(d.createAudioFp("triangle",a),20)}),20)}),20)})})};this.runMediaDeviceInfo=function(a){var d=this,b=(new Date).getTime();this.startFPTimer();if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{navigator.mediaDevices.enumerateDevices().then(function(e){d.experimentalFP.mediaDeviceInfo=[];for(var c=0;c<e.length;c++)d.experimentalFP.mediaDeviceInfo.push({deviceId:e[c].deviceId,groupId:e[c].groupId,kind:e[c].kind,label:e[c].label});d.experimentalFP.mediaDeviceInfo=
d.sortByProperty(d.experimentalFP.mediaDeviceInfo,"kind","desc");d.clientInfoTimingData.mediaDeviceInfoTime=(new Date).getTime()-b;d.clientInfoTimingData.mediaDeviceInfoTimeInt=d.stopFPTimer();c=d.experimentalFP;for(var f=[],g=0;g<e.length;g++){for(var k=!1,h=0;h<f.length;h++)f[h].type===e[g].kind&&(k=!0,f[h].count++);k||f.push({type:e[g].kind,count:1})}e=d.sortByProperty(f,"type","desc");c.mediaDeviceInfoCount=e;a()})}catch(g){a(),this.sendScriptError(g)}};this.createAudioFp=function(a,e){var d=
!1,b=!0,c,r=setTimeout(function(){n.removeEventListener("complete",w);c&&clearTimeout(c);h(-2)},4E3);try{var p=this,k,h=function(b){d||(d=!0,p.experimentalFP.audioFpPropertyData||(p.experimentalFP.audioFpPropertyData={channelCount:n.destination.channelCount,channelCountMode:n.destination.channelCountMode,channelInterpretation:n.destination.channelInterpretation,maxChannelCount:n.destination.maxChannelCount,numberOfInputs:n.destination.numberOfInputs,numberOfOutputs:n.destination.numberOfOutputs}),
p.experimentalFP["audioFp"+a]=b,p.clientInfoTimingData["audioFp"+a]=(new Date).getTime()-k,p.clientInfoTimingData["audioFp"+a+"Int"]=p.stopFPTimer(),e())},q=function(){var a=0;try{k=(new Date).getTime(),p.startFPTimer(),a++,3<a&&h(-1),n.startRendering(),b&&(b=!1,l())}catch(D){e(),p.sendScriptError(D)}},l=function(){"suspended"===n.state&&(c=setTimeout(function(){q()},500))},w=function(a){try{clearTimeout(r);var d=0,b=a.renderedBuffer.getChannelData(0).subarray(4500);for(a=0;a<b.length;++a)d+=Math.abs(b[a]);
h(d)}catch(E){e(),p.sendScriptError(E)}},t=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(t){var n=new t(1,5E3,44100),u=n.createOscillator();u.type=a;u.frequency.value=1E4;var v=n.createDynamicsCompressor();v.threshold.value=-50;v.knee.value=40;v.ratio.value=12;v.attack.value=0;v.release.value=.25;u.connect(v);v.connect(n.destination);u.start(0);n.addEventListener("complete",w);q()}else h(-2)}catch(y){e(),this.sendScriptError(y)}};this.msieDetect=function(a){try{var d=new ActiveXObject(a);
try{return d.GetVariable("$version")}catch(g){try{return d.GetVersions()}catch(m){try{var b;for(a=1;9>a;a++)d.isVersionSupported(a+".0")&&(b=a);return b||!0}catch(r){return!0}}}}catch(g){return!1}};this.CreateCanvasFP=function(){var a=document.createElement("canvas");if(a.getContext&&a.getContext("2d")){a.width=250;a.height=250;document.getElementById("fingerprint-output");for(var e=a.getContext("2d"),b=0;b<a.width/2;b++)e.moveTo(2*b,0),e.lineTo(4*b,a.height),e.strokeStyle="rgba(0, 0, 0, 0.1)",e.stroke();
e.font="40px 'Arial'";for(b=0;3>b;b++)e.fillStyle="#41b4e7",e.fillText("Dotmetrics",10,50*b+75),e.fillStyle="rgba(255, 255, 255, 0.7)",e.fillText("Dotmetrics",20,50*b+75);a=a.toDataURL("image/jpeg",1);return this.SHA1(a).toString()}return null};var a=0,b=null;this.startFPTimer=function(){a=0;b=setInterval(function(){a+=100},100)};this.stopFPTimer=function(){clearInterval(b);return a};this.CreateElement=function(a,b,c){if(null!=a){a=document.createElement(a);if(null!=b)for(var d in b)"function"==typeof b[d]?
this.addEventSimple(a,d,b[d]):(a.setAttribute(d,b[d]),"class"==d&&this.isIE()&&(a.className=b[d]));null!=c&&(b=document.createTextNode(c.toString()),a.appendChild(b));return a}return null!=c?document.createTextNode(c.toString()):null};this.encode=function(a){var d="",b=0;for(a=this.utf8Encode(a);b<a.length;){var c=a.charCodeAt(b++);var m=a.charCodeAt(b++);var r=a.charCodeAt(b++);var p=c>>2;c=(c&3)<<4|m>>4;var k=(m&15)<<2|r>>6;var h=r&63;isNaN(m)?k=h=64:isNaN(r)&&(h=64);d=d+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)}return d};this.utf8Encode=function(a){a=a.replace(/\r\n/g,"\n");for(var d="",b=0;b<a.length;b++){var c=a.charCodeAt(b);128>c?d+=String.fromCharCode(c):(127<c&&2048>c?d+=String.fromCharCode(c>>6|192):(d+=String.fromCharCode(c>>12|224),d+=String.fromCharCode(c>>6&63|128)),
d+=String.fromCharCode(c&63|128))}return d};this.SHA1=function(a){function b(a,b){return a<<b|a>>>32-b}function d(a){var b="",c;for(c=7;0<=c;c--){var d=a>>>4*c&15;b+=d.toString(16)}return b}var c,m=Array(80),r=1732584193,p=4023233417,k=2562383102,h=271733878,q=3285377520;a=function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):(127<d&&2048>d?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>
6&63|128)),b+=String.fromCharCode(d&63|128))}return b}(a);var l=a.length;var w=[];for(c=0;c<l-3;c+=4){var t=a.charCodeAt(c)<<24|a.charCodeAt(c+1)<<16|a.charCodeAt(c+2)<<8|a.charCodeAt(c+3);w.push(t)}switch(l%4){case 0:c=2147483648;break;case 1:c=a.charCodeAt(l-1)<<24|8388608;break;case 2:c=a.charCodeAt(l-2)<<24|a.charCodeAt(l-1)<<16|32768;break;case 3:c=a.charCodeAt(l-3)<<24|a.charCodeAt(l-2)<<16|a.charCodeAt(l-1)<<8|128}for(w.push(c);14!=w.length%16;)w.push(0);w.push(l>>>29);w.push(l<<3&4294967295);
for(a=0;a<w.length;a+=16){for(c=0;16>c;c++)m[c]=w[a+c];for(c=16;79>=c;c++)m[c]=b(m[c-3]^m[c-8]^m[c-14]^m[c-16],1);t=r;l=p;var n=k;var u=h;var v=q;for(c=0;19>=c;c++){var y=b(t,5)+(l&n|~l&u)+v+m[c]+1518500249&4294967295;v=u;u=n;n=b(l,30);l=t;t=y}for(c=20;39>=c;c++)y=b(t,5)+(l^n^u)+v+m[c]+1859775393&4294967295,v=u,u=n,n=b(l,30),l=t,t=y;for(c=40;59>=c;c++)y=b(t,5)+(l&n|l&u|n&u)+v+m[c]+2400959708&4294967295,v=u,u=n,n=b(l,30),l=t,t=y;for(c=60;79>=c;c++)y=b(t,5)+(l^n^u)+v+m[c]+3395469782&4294967295,v=u,
u=n,n=b(l,30),l=t,t=y;r=r+t&4294967295;p=p+l&4294967295;k=k+n&4294967295;h=h+u&4294967295;q=q+v&4294967295}y=d(r)+d(p)+d(k)+d(h)+d(q);return y.toLowerCase()};this.sendMessageToExtension=function(a,b){window.sendMessageToDotmetricsExtension&&window.sendMessageToDotmetricsExtension(a,b)};this.postMessage=function(a,b){try{"undefined"!=typeof b?b.postMessage(a,"*"):window.postMessage(a,"*")}catch(f){}};var c=!1;this.sendScriptError=function(a){if(!c){var b={};a&&a.name&&(b.name=a.name);a&&a.message&&
(b.message=a.message);a&&a.stack&&(b.stack=a.stack);c=!0;this.performAjaxPost(this.SettingsObject.ErrorEventUrl,{type:"script",details:{pvid:this.SettingsObject.PVID},error:b,sectionId:this.SettingsObject.SiteSectionId,pageUrl:window.location.href})}}}var A=new function(){this.SettingsObject=window.DotMetricsSettings;this.boundBeacon=navigator.sendBeacon.bind(navigator);this.Core=new C(this.SettingsObject);this.EnterPageEventData=null;this.TimeOnPage=0;this.LastSentTimeOnPage=-1;this.TimeBuffer=0;
this.TimeTreshold=18E5;this.surveyLink=this.LoadTimeStamp="";this.DeviceGuidId=this.UserId=this.DeviceId=null;this.deviceInfoSent=!1;this.postIndex=0;this.surveyDone=this.Done=!1;this.ajaxTimer=null;this.panel=!1;this.panelHouseholdId=this.panelUserId=null;this.videos={};this.foundVideoPlayers=[];this.SaveTimeOnPageInterval=1E4;this.MaxTimeOnPageItemsInLocalStorage=32;this.fbInstantArticle=!1;this.lastInteraction=this.saveTimeOnPageIntervalFunctionId=this.timeBufferIntervalInstanceId=null;this.domainCookie=
this.SettingsObject.DomainCookie;this.Start=function(){var a=this;try{0<=navigator.userAgent.indexOf("FBIA")&&(a.fbInstantArticle=!0);document.addEventListener("visibilitychange",function(){try{if("hidden"===document.visibilityState){a.stopIntervalFunctions();a.emptyTimeBuffer();var b=a.SendTimeOnPageBeacon();a.SaveTimeOnPage(b)}else"visible"===document.visibilityState&&a.startIntervalFunctions()}catch(d){a.Core.sendScriptError(d)}});a.startIntervalFunctions();this.initPanelElements();this.initInteractionEvents();
this.listenForExtensionMessages();var b=this.createStartData();a.Core.sendData(this.SettingsObject.DataUrl,b);if(window.dm)this.onAjaxDataUpdate();1==this.SettingsObject.VideoTrackingEnabled&&this.trackVideos()}catch(c){a.Core.sendScriptError(c)}};this.listenForExtensionMessages=function(){var a=this;window.addEventListener("message",function(b){b.data.source&&"dotmetrics-extension"==b.data.source&&b.data.type&&a.handleExtensionRequest(b.data.type,b.source)})};this.handleExtensionRequest=function(a,
b){switch(a){case "timeOnPage":a=this.createCurrentTimeOnPageObject();var c=this.getTimeOnPageDataTemplate();c.ep.push(a);this.Core.sendMessageToExtension({target:"dotmetrics-extension",type:"timeOnPage",data:c},b);break;case "getEnterPageData":this.EnterPageEventData&&(c=JSON.parse(JSON.stringify(this.EnterPageEventData)),c.pvid=this.SettingsObject.PVID,c.dc=this.domainCookie,this.Core.postMessage({target:"dotmetrics-plugin",type:"enterPageData",data:c},b));break;case "getDeviceInfo":var d=this;
this.Core.createClientInfo(function(){var a={deviceInfo:d.Core.clientInfo,deviceHash:d.Core.SHA1(DotmetricsJSON.stringify(d.Core.clientInfo)),experimentalFP:d.Core.experimentalFP,clientInfoTimingData:d.Core.clientInfoTimingData};d.Core.postMessage({target:"dotmetrics-extension",type:"deviceInfo",data:a},b)})}};this.createStartData=function(){var a=(new Date).getTimezoneOffset();a={id:this.SettingsObject.SiteSectionId,fl:!0,dom:window.location.hostname,lso:null,url:window.location.href,rurl:window.document.referrer,
pvid:this.SettingsObject.PVID,dc:this.domainCookie,tzOffset:a};this.panel&&(a.hhid=this.panelHouseholdId,a.uid=this.panelUserId);var b="DM_SitId"+this.SettingsObject.SiteId,c="DM_SitIdT"+this.SettingsObject.SiteId,d=b+"SecId"+this.SettingsObject.SiteSectionId,e=b+"SecIdT"+this.SettingsObject.SiteSectionId,f=this.Core.getFromLocalStorage("DotmetricsSiteData");try{f=f?DotmetricsJSON.parse(f):{}}catch(r){f={}}var g=(new Date).getTime()-18E5;for(m in f)f[m]<g&&delete f[m];this.Core.hasCookie(b)&&f.hasOwnProperty(c)?
a.oss=!1:(this.Core.setCookie(b,"1"),a.oss=!0);this.Core.hasCookie(d)&&f.hasOwnProperty(e)?a.oses=!1:(this.Core.setCookie(d,"1"),a.oses=!0);var m=(new Date).getTime();f[c]=m;f[e]=m;c={DotmetricsSiteData:JSON.stringify(f)};this.Core.saveInLocalStorage(c);return a};this.processActions=function(a){try{var b=this,c=(new Date).getTimezoneOffset(),d={id:this.SettingsObject.SiteSectionId,fl:!1,dom:window.location.hostname,lso:null,ds:null,dsl:null,dh:null,url:window.location.href,rurl:window.document.referrer,
pvid:this.SettingsObject.PVID,dc:this.domainCookie,tzOffset:c};this.panel&&(d.hhid=this.panelHouseholdId,d.uid=this.panelUserId);c=!1;if(a.SendDeviceInfo||a.Ping){var e={deviceInfo:!1,pings:0,exitPageData:!1};a.Ping&&0<a.Ping&&0==this.deviceInfoSent&&(e.pings=a.Ping);a.SendDeviceInfo&&0==this.deviceInfoSent&&(this.deviceInfoSent=e.deviceInfo=!0);this.submitData(e)}if(a.Survey&&a.Survey.SurveyUrl)if(this.Survey=a.Survey,this.Survey.Mobile){var f=this;this.anchor=this.Core.CreateElement("a",{href:a.Survey.SurveyUrl,
style:"position:fixed; width:100%; height:100%; top:0; left:0; background:#f00; opacity:0;z-index:99999",target:"_blank",id:"DotMetricsPopupLink"},null);document.body.appendChild(this.anchor);this.Core.addEventSimple(this.anchor,"click",function(a){try{a.preventDefault();var b=f.anchor.getAttribute("href");document.body.removeChild(f.anchor);f.surveyDone||(f.surveyDone=!0,setTimeout(function(){window.open(b,"_blank")},20))}catch(w){f.Core.sendScriptError(w)}})}else{var g=function(){try{document.body.addEventListener?
document.body.removeEventListener("click",g):document.body.detachEvent("onclick",g),b.showSurvey()}catch(q){b.Core.sendScriptError(q)}};document.body.addEventListener?document.body.addEventListener("click",g,!1):document.body.attachEvent("onclick",g)}if(a.SendDeviceHash)if(this.Core.clientInfo){var m=DotmetricsJSON.stringify(this.Core.clientInfo),r=this.Core.SHA1(m);d.dh=r.toString();c=!0}else{this.Core.createClientInfo(function(){b.processActions(a)});return}a.PersistDeviceAndUser&&a.DeviceId&&a.UserId&&
a.DeviceGuidId&&this.Core.saveInLocalStorage({DotMetricsDeviceId:a.DeviceId,DotMetricsUserId:a.UserId,DotMetricsDeviceGuidId:a.DeviceGuidId});if(a.SendLSO){var p=this.Core.getFromLocalStorage("DotMetricsUserId"),k=this.Core.getFromLocalStorage("DotMetricsDeviceId"),h=this.Core.getFromLocalStorage("DotMetricsDeviceGuidId");d.lso=p&&k&&h?{d:k,u:p,dg:h}:{d:"",u:"00000000-0000-0000-0000-000000000000",dg:"00000000-0000-0000-0000-000000000000"};c=!0}c&&b.Core.sendData(this.SettingsObject.DataUrl,d)}catch(q){this.Core.sendScriptError(q)}};
this._timeData=[];this._requestedPingsNum=this._currentRequestNum=0;this._onPingMeasurmentsDone=null;this._pingStartTime=0;this.measurePingTimes=function(a,b){try{this._timeData=[],this._currentRequestNum=0,this._requestedPingsNum=a,this._onPingMeasurmentsDone=b,this.makePingRequest()}catch(c){this.Core.sendScriptError(c)}};this.makePingRequest=function(){this._pingStartTime=(new Date).getTime();var a=0==this._timeData.length?{ctd:0,cl:0}:this._timeData[this._timeData.length-1];a.ct=this._pingStartTime;
this.Core.sendData(this.SettingsObject.PingUrl,a)};this.HandlePing=function(a){try{var b=(new Date).getTime(),c=(b-this._pingStartTime)/2;this._timeData.push({ctd:a.s-b-Math.abs(c),cl:c});this._currentRequestNum++;if(this._currentRequestNum<this._requestedPingsNum)this.makePingRequest();else{for(var d=c=b=0;d<this._timeData.length;d++)b+=this._timeData[d].ctd,c+=this._timeData[d].cl;b=Math.round(b/this._timeData.length);c=Math.round(c/this._timeData.length);a={DeviceSync:b,DeviceSyncLag:c};this._onPingMeasurmentsDone(a)}}catch(e){this.Core.sendScriptError(e)}};
this.showSurvey=function(){this.surveyDone||(this.surveyDone=!0,window.open(this.Survey.SurveyUrl,"","width="+this.Survey.WindowWidth+",height="+this.Survey.WindowHeight+",scrollbars=1").focus())};this.startIntervalFunctions=function(){var a=this;null==this.timeBufferIntervalInstanceId&&(this.timeBufferIntervalInstanceId=setInterval(function(){try{void 0!=document.visibilityState?"visible"==document.visibilityState&&a.TimeBuffer++:a.TimeBuffer++,a.fbInstantArticle&&a.emptyTimeBuffer()}catch(b){a.Core.sendScriptError(b)}},
1E3));null==this.saveTimeOnPageIntervalInstanceId&&(this.saveTimeOnPageIntervalFunctionId=setInterval(function(){a.SaveTimeOnPage()},a.SaveTimeOnPageInterval))};this.stopIntervalFunctions=function(){this.timeBufferIntervalInstanceId&&(clearInterval(this.timeBufferIntervalInstanceId),this.timeBufferIntervalInstanceId=null);this.saveTimeOnPageIntervalFunctionId&&(clearInterval(this.saveTimeOnPageIntervalFunctionId),this.saveTimeOnPageIntervalFunctionId=null)};this.emptyTimeBuffer=function(){try{if((new Date).getTime()-
this.lastInteraction.getTime()<=this.TimeTreshold||this.fbInstantArticle)this.TimeOnPage+=this.TimeBuffer;this.TimeBuffer=0;this.lastInteraction=new Date}catch(a){this.Core.sendScriptError(a)}};this.SendTimeOnPageBeacon=function(){if(this.LastSentTimeOnPage==this.TimeOnPage)return!0;if(navigator.sendBeacon&&this.EnterPageEventData){var a=this.createCurrentTimeOnPageObject(),b=this.getTimeOnPageDataTemplate();b.ep.push(a);this.LastSentTimeOnPage=this.TimeOnPage;return this.Core.performSendBeacon(this.SettingsObject.BeaconUrl,
b)}return!1};this.createCurrentTimeOnPageObject=function(){return{cd:this.EnterPageEventData.CreationDate,eid:this.EnterPageEventData.EventId,id:this.EnterPageEventData.SiteSectionId,sop:this.TimeOnPage,vl:this.getVideoData(),url:window.location.href,rurl:window.document.referrer,pvid:this.SettingsObject.PVID,dc:this.domainCookie}};this.getTimeOnPageDataTemplate=function(){var a=(new Date).getTimezoneOffset();a={id:this.SettingsObject.SiteSectionId,cd:{d:this.DeviceId,u:this.UserId,dg:this.DeviceGuidId},
ep:[],tzOffset:a};this.panel&&(a.hhid=this.panelHouseholdId,a.uid=this.panelUserId);return a};this.SaveTimeOnPage=function(a){try{if(0!=this.Core.lsAvailable()&&null!=this.EnterPageEventData){for(var b=this.getTimeOnPageData(),c=0;c<b.length;c++)if(b[c].eid==this.EnterPageEventData.EventId){b.splice(c,1);break}if(!a){var d=this.createCurrentTimeOnPageObject();b.push(d)}b.length>this.MaxTimeOnPageItemsInLocalStorage&&b.splice(0,b.length-this.MaxTimeOnPageItemsInLocalStorage);a={};a[this.SettingsObject.TimeOnPage]=
DotmetricsJSON.stringify(b);this.Core.saveInLocalStorage(a)}}catch(e){this.Core.sendScriptError(e)}};this.processTimeOnPageData=function(){try{if(0==this.Core.lsAvailable())return null;for(var a=[],b=this.getTimeOnPageData(),c=new Date,d=0;d<b.length;d++)try{var e=b[d],f=new Date(e.cd);864E5>c.getTime()-f.getTime()&&a.push(e)}catch(g){}0==a.length&&(a=null);this.Core.removeFromLocalStorage(this.SettingsObject.TimeOnPage);return a}catch(g){this.Core.sendScriptError(g)}};this.getTimeOnPageData=function(){try{var a=
this.Core.getFromLocalStorage(this.SettingsObject.TimeOnPage),b=[];if(null!=a&&0<a.length)try{b=DotmetricsJSON.parse(a)}catch(c){b=JSON.parse(a)}return b}catch(c){this.Core.sendScriptError(c)}};this.initInteractionEvents=function(){this.lastInteraction=new Date;var a=this;this.Core.addEventSimple(document,"mousemove",function(){a.emptyTimeBuffer()});this.Core.addEventSimple(document,"wheel",function(){a.emptyTimeBuffer()});this.Core.addEventSimple(document,"touchend",function(){a.emptyTimeBuffer()})};
this.initPanelElements=function(){if(document.getElementById("DotmetricsPanelUserId")&&document.getElementById("DotmetricsPanelHouseholdId")){this.panel=!0;this.panelUserId=document.getElementById("DotmetricsPanelUserId").value;this.panelHouseholdId=document.getElementById("DotmetricsPanelHouseholdId").value;var a=document.createElement("input");a.setAttribute("type","hidden");a.setAttribute("id","DotmetricsScriptLoaded");a.setAttribute("value","true");document.getElementsByTagName("head")[0].appendChild(a)}};
this.CreateIframe=function(){this.iFrameHolderDiv=this.Core.CreateElement("div",{id:"DotMetricsPF",style:"display:none;width:0px;height:0px;position:absolute; left:-2000px;"},null);var a="dotmetricsframe"+this.postIndex;this.postIndex++;this.iFrameHolderDiv.style.display="none";try{this.iframe=document.createElement('<iframe name="'+a+'" style:"display:none;width:0px;height:0px;">')}catch(b){this.iframe=this.Core.CreateElement("iframe",{name:a,id:a,style:"display:none;width:0px;height:0px;"},null)}this.iframe.id=
a;this.form=this.Core.CreateElement("form",{action:this.SettingsObject.PostUrl,method:"post",target:a,id:"DotMetricsForm"},null);this.formInput=this.Core.CreateElement("input",{type:"text",name:"v"},null);document.body.appendChild(this.iFrameHolderDiv);this.iFrameHolderDiv.appendChild(this.iframe);this.iFrameHolderDiv.appendChild(this.form);this.form.appendChild(this.formInput);document.getElementById("DotMetricsForm").target=a};this.submitData=function(a){function b(){try{c.CreateIframe();c.formInput.value=
DotmetricsJSON.stringify(e);c.form.submit();var a=c.iFrameHolderDiv;setTimeout(function(){document.body.removeChild(a)},5E3)}catch(g){c.Core.sendScriptError(g)}}var c=this;this.Core.formPostCount++;if(!(this.Core.formPostCount>this.Core.callLimit)){var d=(new Date).getTimezoneOffset(),e={id:this.SettingsObject.SiteSectionId,cd:{d:this.DeviceId,u:this.UserId,dg:this.DeviceGuidId},di:null,ds:0,dsl:0,url:window.location.href,rurl:window.document.referrer,pvid:this.SettingsObject.PVID,dc:this.domainCookie,
tzOffset:d};this.panel&&(e.hhid=this.panelHouseholdId,e.uid=this.panelUserId);if(a.deviceInfo)if(this.Core.clientInfo)e.di=this.Core.clientInfo,e.expFP=this.Core.experimentalFP,e.timingFP=this.Core.clientInfoTimingData;else{this.Core.createClientInfo(function(){c.submitData(a)});return}0<a.pings?this.measurePingTimes(a.pings,function(a){e.ds=a.DeviceSync;e.dsl=a.DeviceSyncLag;b()}):b()}};this.HandleJsonp=function(a){try{var b=this;b.Core.sendMessageToExtension({target:"dotmetrics-extension",type:"jsonpResponse",
data:a,pvid:this.SettingsObject.PVID,dc:this.domainCookie});this.UserId=a.UserId;this.DeviceId=a.DeviceId;this.DeviceGuidId=a.DeviceGuidId;window.DotMetricsObj.DeviceId=this.DeviceId;window.DotMetricsObj.UserId=this.UserId;this.deviceInfoSent&&(a.SendDeviceInfo=!1,a.Ping=0);if(this.firstLoadDone)this.processActions(a);else{this.firstLoadDone=!0;this.EnterPageEventData=a.EnterPageEventData;window.DotMetricsObj.firstLoadDone=!0;window.DotMetricsObj.EnterPageEventData=a.EnterPageEventData;var c={deviceInfo:!1,
pings:0};1==a.SendDeviceInfo&&0==this.deviceInfoSent&&(c.deviceInfo=!0,a.SendDeviceInfo=!1,this.deviceInfoSent=!0);a.Ping&&0<a.Ping&&(c.pings=a.Ping,a.Ping=!1);setTimeout(function(){try{(c.deviceInfo||c.pings)&&b.submitData(c);var d=b.processTimeOnPageData();b.Core.setCookie(b.SettingsObject.TimeOnPage,null,0);if(d){var e=b.getTimeOnPageDataTemplate();e.ep=d;b.Core.performAjaxPost(b.SettingsObject.BeaconUrl,e)}b.processActions(a)}catch(f){b.Core.sendScriptError(f)}},1E3*Math.random()+500)}}catch(d){this.Core.sendScriptError(d)}};
this.onAjaxDataUpdate=function(){try{var a=window.dm,b=this;null==this.ajaxTimer&&"undefined"!=typeof a&&"undefined"!=typeof a.AjaxData&&0<a.AjaxData.length&&(this.ajaxTimer=setTimeout(function(){try{b.cloneAjaxDataForStressTestScript(a.AjaxData);var c=b.prepareAjaxData(a.AjaxData);a.AjaxData.length=0;b.ajaxTimer=null;b.Core.performAjaxPost(b.SettingsObject.AjaxEventUrl,c)}catch(d){b.Core.sendScriptError(d)}},this.SettingsObject.AjaxEventTimeout))}catch(c){this.Core.sendScriptError(c)}};this.cloneAjaxDataForStressTestScript=
function(a){try{if("undefined"!=typeof window.DotMetricsObjStress){var b=JSON.parse(JSON.stringify(a));"undefined"==typeof window.dmStress&&(window.dmStress={AjaxData:[]});for(a=0;a<b.length;a++)window.dmStress.AjaxData.push(b[a]);window.DotMetricsObjStress.onAjaxDataUpdate()}}catch(c){}};this.prepareAjaxData=function(a){var b=(new Date).getTimezoneOffset(),c={siteSectionId:this.SettingsObject.SiteSectionId,pvid:this.SettingsObject.PVID,dc:this.domainCookie,domain:window.location.hostname,events:[],
tzOffset:b};this.panel&&(c.hhid=this.panelHouseholdId,c.uid=this.panelUserId);var d=this;a.forEach(function(a){var b={};b.eventType=a.et?a.et:"pageview";b.eventData=a.d?a.d:null;b.eventSiteSectionId=a.ssid?a.ssid:d.SettingsObject.SiteSectionId;isNaN(b.eventSiteSectionId)&&(b.eventTag=b.eventSiteSectionId,delete b.eventSiteSectionId);b.url=a.url?a.url:window.location.href;c.events.push(b)});return c};this.trackVideos=function(){var a=this;(new B(function(b,c,d){switch(b){case "flowPlayer":a.trackFP(d,
b,c);break;case "jwPlayer":a.trackJW(d,b,c);break;case "videojs":a.trackVideoJS(d,b,c)}})).init()};var z=!1;this.sendVideoError=function(a,b,c){if(!z){z=!0;var d={};c&&c.name&&(d.name=c.name);c&&c.message&&(d.message=c.message);c&&c.stack&&(d.stack=c.stack);this.Core.performAjaxPost(this.SettingsObject.ErrorEventUrl,{type:"video",details:{player:a,playerVersion:b},error:d,sectionId:this.SettingsObject.SiteSectionId,pageUrl:window.location.href})}};this.trackFP=function(a,b,c){function d(){var b="";
try{b=a.opts.title}catch(l){}return a.currentSrc+"_"+b}function e(){var b="";try{b=a.opts.title}catch(t){}var c=Math.max(0,a.duration),e=d();g.videos[e]={vid:a.currentSrc,w:a.videoWidth,h:a.videoHeight,vdur:c,tw:0,ls:a.opts.live,t:b};r=m=null}function f(d){a.off("loadedmetadata",p);a.off("seeked",k);a.off("timeupdate",h);g.sendVideoError(b,c,d)}var g=this,m=null,r=null,p=function(a){try{e()}catch(l){f(l)}},k=function(b){try{m=a.currentTime,r=(new Date).getTime()}catch(l){f(l)}},h=function(b){try{if(m&&
0==a.playerState["is-seeking"]){var c=a.currentTime-m,h=.001*((new Date).getTime()-r);if(0<c){if(1<c)return;var q=d();g.videos[q]?(a.currentTime!=m&&0<h&&1>h&&(g.videos[q].tw+=h),g.videos[q].vdur<a.duration&&(g.videos[q].vdur=a.duration)):e()}}m=a.currentTime;r=(new Date).getTime()}catch(n){f(n)}};a.on("loadedmetadata",p);a.on("seeked",k);a.on("timeupdate",h)};this.trackJW=function(a,b,c){function d(){var b=a.getPlaylistItem();if("undefined"!=typeof b){var c=b.file+"_"+b.title;if(!f.videos[c]){var d=
a.getConfig();f.videos[c]={vid:b.file,w:a.getWidth(),h:a.getHeight(),vdur:a.getDuration(),tw:0,ls:d&&"Live"==d.streamType,t:b.title};0>f.videos[c].vdur&&(f.videos[c].vdur=0)}g=a.getPosition();m=(new Date).getTime()}}function e(d){a.off("play",r);a.off("seek",p);a.off("time",k);f.sendVideoError(b,c,d)}var f=this,g=null,m=null,r=function(a){try{d()}catch(q){e(q)}},p=function(a){try{g=a.offset}catch(q){e(q)}},k=function(b){try{if(g){var c=.001*((new Date).getTime()-m),h=a.getPlaylistItem();if("undefined"==
typeof h)return;var k=h.file+"_"+h.title;"undefined"==typeof f.videos[k]&&d();b.position!=g&&0<c&&1>c&&(f.videos[k].tw+=c);f.videos[k].h||(f.videos[k].h=a.getHeight());f.videos[k].w||(f.videos[k].w=a.getWidth());if(!f.videos[k].vdur||f.videos[k].vdur<a.getDuration())f.videos[k].vdur=a.getDuration()}g=b.position;m=(new Date).getTime()}catch(t){e(t)}};a.on("play",r);a.on("seek",p);a.on("time",k)};this.trackVideoJS=function(a,b,c){function d(){var b=a.mediainfo?a.mediainfo.name:"";return a.currentSrc()+
"_"+b}function e(){var b=a.currentSrc();if(""!=b){var c=d();g.videos[c]||(g.videos[c]={vid:b,w:"function"==typeof a.videoWidth?a.videoWidth():a.width(),h:"function"==typeof a.videoHeight?a.videoHeight():a.height(),vdur:a.duration(),tw:0,ls:!1,t:a.mediainfo?a.mediainfo.name:""},0>g.videos[c].vdur&&(g.videos[c].vdur=0),r=m=null)}}function f(d){a.off("loadedmetadata",p);a.off("timeupdate",k);g.sendVideoError(b,c,d)}var g=this,m=null,r=null,p=function(){try{e()}catch(h){f(h)}},k=function(){try{if(m&&
0==a.seeking()&&("function"==typeof a.scrubbing?0==a.scrubbing():1)){var b=.001*((new Date).getTime()-r);if(""==a.currentSrc())return;var c=d();if("undefined"==typeof g.videos[c]){e();return}try{g.videos[c].ls=g.videos[c].ls||"undefined"!=a.liveTracker&&a.liveTracker.isLive&&a.liveTracker.isLive()}catch(l){}g.videos[c].vdur<a.duration()&&(g.videos[c].vdur=a.duration());a.currentTime()!=m&&0<b&&1>b&&(g.videos[c].tw+=b)}m=a.currentTime();r=(new Date).getTime()}catch(l){f(l)}};a.on("loadedmetadata",
p);a.on("timeupdate",k)};this.getVideoData=function(){var a=this.videos,b=[],c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];!d.vid||""==d.vid||0<=d.vid.indexOf("data:video")||(d.w=Math.round(d.w),d.h=Math.round(d.h),d.w||(d.w=0),d.h||(d.h=0),d.vdur&&isFinite(d.vdur)?(d.vdur=Math.round(d.vdur),0>d.vdur&&(d.vdur=0)):d.vdur=0,0<d.tw&&1>d.tw&&(d.tw=1),d.tw=Math.round(d.tw),0<d.tw&&b.push(d))}return b}};window.DotMetricsObj={onAjaxDataUpdate:function(){A.onAjaxDataUpdate()},HandleJsonp:function(z){A.HandleJsonp(z)},
HandlePing:function(z){A.HandlePing(z)}};top.location==self.location&&setTimeout(function(){A.Start()},100)})(window);
