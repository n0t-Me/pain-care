"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3877],{20964:function(e,t,a){a.d(t,{Z:function(){return re}});var r=a(27378),n=a(68442),o=a(55336),i=a(10043),l=a(40),c=a(61932),u=a(6284),s=a(59466),d=a(51663),p=a(92371),v=(0,n.default)("div",{target:"evp3dmw4",label:"ErrorWrapper"})("align-items:start;display:flex;flex-direction:column;color:",(e=>{var{theme:t}=e;return t.colourPalette.secondary}),";padding-left:",p.SPACING_3,";"),f=(0,n.default)("div",{target:"evp3dmw3",label:"ErrorTitleWrapper"})("display:flex;flex-direction:row;padding-bottom:",p.SPACING_2,";"),y=(0,n.default)("p",{target:"evp3dmw2",label:"ErrorTitle"})(c.oV,";"),g=(0,n.default)("span",{target:"evp3dmw1",label:"IconWrapper"})("margin-right:",p.SPACING_1,";height:",(0,l.s)(20),";width:",(0,l.s)(16),";"),m=(0,n.default)("p",{target:"evp3dmw0",label:"ErrorText"})(c.WM,";"),b=e=>{var{error:t}=e,{title:a,message:n}=t;return r.createElement(v,{"aria-live":"polite"},r.createElement(f,null,r.createElement(g,null,r.createElement(u.Z,{type:"labels:warning"})),r.createElement(y,null,a)),r.createElement(m,null,n))};var E=(0,n.default)("div",{target:"e1sdqgsa2",label:"ModalWrapper"})("width:",(0,l.s)(304),";top:",(e=>{var{layout:t}=e;return"right"===(null==t?void 0:t.modalSide)?(0,l.s)(40):(0,l.s)(32)}),";position:absolute;",(e=>{var{layout:t}=e;return"right"===(null==t?void 0:t.modalSide)&&"left: ".concat((0,l.s)(-10),";")})," z-index:1;[data-testid='modal-panel-icon']{display:none;}#modal-panel{display:flex;width:100%;justify-content:space-between;}#close{width:min-content;height:min-content;}[class*='StyledPanel']{padding:revert;background-color:",(e=>{var{theme:t}=e;return t.colourPalette.background}),";color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";border:",(0,l.s)(1)," solid ",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";&:before{content:'';position:absolute;background-color:",(e=>{var{theme:t}=e;return t.colourPalette.background}),";clip-path:polygon(0 100%, 50% 0, 100% 100%);width:",(0,l.s)(16),";height:",(0,l.s)(12),";top:",(0,l.s)(-11),";left:",(e=>{var{layout:t}=e;return"right"===(null==t?void 0:t.modalSide)?(0,l.s)(10):(0,l.s)(272)}),";}}[class*='ErrorTriangle']{background-color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";margin-left:",(e=>{var{layout:t}=e;return"right"===(null==t?void 0:t.modalSide)?(0,l.s)(11):(0,l.s)(273)}),";}[class*='Greeting']{font-size:",(0,l.s)(16),";color:",(e=>{var{theme:t}=e;return t.colourPalette.secondary}),";}"),S=(0,n.default)("div",{target:"e1sdqgsa1",label:"ModalTextWrapper"})("margin:",p.SPACING_4," 0 ",p.SPACING_4," ",p.SPACING_4,";"),h=(0,n.default)("div",{target:"e1sdqgsa0",label:"ModalContents"})({name:"uqztsn",styles:"display:flex;flex-direction:row;justify-content:space-between;width:100%"}),C=e=>{var{onClose:t,error:a,config:n,layout:o}=e,i=(0,r.useRef)(null);(0,r.useEffect)((()=>{var e=e=>{i.current.contains(e.target)||t()};return document.addEventListener("focus",e,!0),()=>{document.removeEventListener("focus",e,!0)}}),[t]),(0,r.useEffect)((()=>{i.current.focus()}),[]);var l=n.customModal;return r.createElement(E,{layout:o,"data-testid":"reactions-modal"},r.createElement(s.ZP,{id:"modal-panel",renderOption:"UPWARD_ARROW"},r.createElement(h,{ref:i,tabIndex:0,role:"dialog"},r.createElement(S,{"aria-live":"assertive"},r.createElement("div",{"aria-live":"assertive"},a&&r.createElement(b,{error:a})),!a&&r.createElement(l,null)),r.createElement(d.Z,{onClick:()=>t(!0),id:"close",emphasis:"low",alignContent:"start",iconType:"actions:close",iconOnly:!0,cornerFit:!0,"aria-label":"Close the modal","data-testid":"reactions-modal-close"},"Close"))))};function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){P(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var w,R="SET_INITIAL_SERVICE_STATE",k="SET_MODAL_STATUS",j="SET_ERROR",A="SET_SERVICE_STATE_LOADING",_="SET_SERVICE_STATE_SUCCESS",I="DIFFERENT_REACTION_TYPE_SELECTED",x={modalOpen:!1,error:null,reactionState:{state:"idle"}},D=(e,t)=>{switch(t.type){case k:return T(T({},e),{},{modalOpen:t.data.open});case j:return T(T({},e),{},{error:t.data.error,reactionState:{state:"failed"}});case A:return T(T({},e),{},{reactionState:T(T({},e.reactionState),{},{state:"loading"})});case R:return T(T({},e),{},{reactionState:{state:t.data.initialState.state,voteAddition:t.data.initialState.voteAddition}});case _:var{voteAddition:a}=t.data;return T(T({},e),{},{reactionState:T(T({},e.reactionState),{},{state:"success",voteAddition:a})});case I:var{lastClickedReactionType:r,reactionType:n}=t.data;return null!=r&&r.reactionType&&r.reactionType!==n?T(T({},e),{},{reactionState:{state:"idle"}}):e;default:throw new Error("Unknown action type - individual reaction reducer - ".concat(t.type))}};function L(e,t,a,r,n,o,i){try{var l=e[o](i),c=l.value}catch(u){return void a(u)}l.done?t(c):Promise.resolve(c).then(r,n)}var N=e=>{var t,a,{layout:r}=e;return(0,i.iv)(w||(t=["\n  height: ",";\n  width: ",";\n"],a||(a=t.slice(0)),w=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(a)}}))),null!=r&&r.largeIcon?(0,l.s)(20):(0,l.s)(32),null!=r&&r.largeIcon?(0,l.s)(20):(0,l.s)(16))},M=(0,n.default)("div",{target:"e16zfrs85",label:"ReactionsWrapper"})({name:"tx386s",styles:"position:relative;display:flex;flex-direction:column;place-items:flex-end"}),W=(0,n.default)("span",{target:"e16zfrs84",label:"IconWrapper"})("position:relative;margin-right:",(e=>{var{layout:t}=e;return"large"===(null==t?void 0:t.iconSpacing)?(0,l.s)(10):(0,l.s)(5)}),";",N,";"),z=(0,n.default)("span",{target:"e16zfrs83",label:"FilledIcon"})("position:absolute;",(e=>{var{layout:t,filled:a,theme:r}=e;return a?"color: ".concat("hyperlink"===(null==t?void 0:t.iconColour)?r.colourPalette.hyperlink:r.colourPalette.states.interactionHover):""}),";",(e=>{var{layout:t,theme:a}=e;return null!=t&&t.transparentIcon?"":"background: ".concat(a.colourPalette.background,";")})," ",N," top:0;left:0;"),V=(0,n.default)("span",{target:"e16zfrs82",label:"LoadingIcon"})("position:absolute;color:",(e=>{var{layout:t,theme:a}=e;return"hyperlink"===(null==t?void 0:t.iconColour)?a.colourPalette.states.hyperlink:a.colourPalette.states.interactionHover})," ",(e=>{var{layout:t,theme:a}=e;return null!=t&&t.transparentIcon?"":"background: ".concat(a.colourPalette.background,";")}),";",N," top:0;left:0;"),G=(0,n.default)("span",{target:"e16zfrs81",label:"ReactionsCountWrapper"})(c.oV,";"),F=(0,n.default)("button",{target:"e16zfrs80",label:"Button"})(c.oV," display:inline-flex;padding:",(e=>{var{layout:t}=e;return"large"===(null==t?void 0:t.iconSpacing)?(0,l.s)(12):(0,l.s)(5)}),";color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";:focus,:hover{cursor:pointer;",z,"{display:block;}}[data-filled='succeeded']{display:block;}align-items:center;"),U=e=>{var{reactionState:t,iconType:a,layout:n}=e,o=t.state&&t.voteAddition,i=o?"".concat(a,"-filled"):a;return"loading"===t.state?r.createElement(W,{layout:n},r.createElement(V,{"data-testid":"loading-spinner",layout:n},r.createElement(u.Z,{type:"playback-avkx:loading"}))):r.createElement(W,{layout:n},r.createElement(z,{"data-testid":"vote-icon-".concat(i),filled:o,"data-filled":i,layout:n},r.createElement(u.Z,{type:i})))},Z=e=>{var{reactionCount:t,onReactionChange:a,reactionType:n,action:o,lastClickedReactionType:i,onReaction:l,config:c,layout:u}=e,s=(0,r.useRef)(null),[d,p]=(0,r.useReducer)(D,x);(0,r.useEffect)((()=>{c.initialReactionState&&p({type:R,data:{initialState:c.initialReactionState}})}),[c.initialReactionState]),(0,r.useEffect)((()=>{p({type:I,data:{lastClickedReactionType:i,reactionType:n}})}),[i,n]);var v="positive"===n?"participate:like":"participate:dislike",f="positive"===n?"Like comment. Number of likes: ".concat(t):"Dislike comment. Number of dislikes: ".concat(t),y=()=>{p({type:k,data:{open:!0}})},g=function(){var e,t=(e=function*(){if(null!=c&&c.isModalForced&&null!=c&&c.isModalForced())y();else{var e,t,r=!0;null!=c&&c.allowReactionRemoval&&(r=null===(e=d.reactionState)||void 0===e||!e.voteAddition||!(null!==(t=d.reactionState)&&void 0!==t&&t.voteAddition)),p({type:A});try{yield l({reactionType:n,voteAddition:r,lastClickedReactionType:i}),p({type:_,data:{voteAddition:r}}),a(n,r,o)}catch(u){p({type:j,data:{error:{title:"Sorry, there was a problem",message:"Please try again later."}}}),y()}}},function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function i(e){L(o,r,n,i,l,"next",e)}function l(e){L(o,r,n,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return r.createElement(M,null,d.modalOpen&&r.createElement(C,{layout:u,config:c,error:d.error,onClose:e=>function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];p({type:k,data:{open:!1}}),e&&s.current.focus()}(e)}),r.createElement(F,{"data-testid":"".concat(n,"-reaction"),onClick:g,"aria-label":f,disabled:"loading"===d.reactionState.state||"success"===d.reactionState.state&&!(null!=c&&c.allowReactionRemoval),role:"button",ref:s,layout:u,className:"reaction-button"},r.createElement(U,{iconType:v,reactionState:d.reactionState,layout:u}),r.createElement(G,{layout:u,"data-testid":"".concat(n,"-reaction-count")},t)))};function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){B(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function B(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var K="SET_INITIAL_STATE",Y="POSITIVE_VOTE",J="NEGATIVE_VOTE",Q={positiveCount:0,negativeCount:0,lastClickedReactionType:void 0},X=(e,t)=>{switch(t.type){case Y:var a=Math.max(0,e.positiveCount+t.data.positive),r=Math.max(0,e.negativeCount-1),n=t.data.lastReactionType,{config:o}=t.data;return o.updateLocalReaction&&o.updateLocalReaction({positiveCount:a,negativeCount:r,lastClickedReactionType:n}),H(H({},e),{},{positiveCount:a,negativeCount:r,lastClickedReactionType:n,isInitialState:!1});case J:var i=Math.max(0,e.positiveCount-1),l=Math.max(0,e.negativeCount+t.data.negative),c=t.data.lastReactionType,{config:u}=t.data;return u.updateLocalReaction&&u.updateLocalReaction({positiveCount:i,negativeCount:l,lastClickedReactionType:c}),H(H({},e),{},{positiveCount:i,negativeCount:l,lastClickedReactionType:c,isInitialState:!1});case K:var{positiveCount:s,negativeCount:d,lastClickedReactionType:p}=t.data;return H(H({},e),{},{positiveCount:s,negativeCount:d,lastClickedReactionType:p,isInitialState:!0});default:throw new Error("Unknown action type - reactions reducer - ".concat(t.type))}};function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){te(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function te(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ae=(0,n.default)("div",{target:"eiijkmw0",label:"Wrapper"})(o.eV," margin-left:auto;display:flex;position:relative;>:first-child button.reaction-button{padding-left:0;}",(e=>{var{layout:t}=e;return"right"===(null==t?void 0:t.modalSide)?">:not(:first-child) div { left: 0px; }":""}),";"),re=e=>{var{ratings:t,initialReaction:a,onReaction:n,config:o={allowReactionRemoval:!1,isModalForced:()=>!1,updateLocalReaction:void 0},layout:i={transparentIcon:!0,largeIcon:!0,iconSpacing:"large",iconColour:"hyperlink",modalSide:"left"}}=e,[l,c]=(0,r.useReducer)(X,Q);(0,r.useEffect)((()=>{a&&c({type:K,data:{positiveCount:a.positive,negativeCount:a.negative,lastClickedReactionType:a.lastClicked}})}),[a]);var u=(e,t,a)=>{var r=t?1:-1,n=t?{reactionType:e,action:a}:null;c("positive"===e?{type:Y,data:{positive:r,lastReactionType:n,voteAddition:t,config:o}}:{type:J,data:{negative:r,lastReactionType:n,voteAddition:t,config:o}})};return r.createElement(ae,{"data-testid":"reactions",layout:i},r.createElement(Z,{reactionCount:l.positiveCount+t.positive,reactionType:"positive",action:"liked",onReactionChange:u,lastClickedReactionType:l.lastClickedReactionType,config:ee(ee({},o),{},{initialReactionState:l.isInitialState&&{state:(null==l?void 0:l.positiveCount)>0?"succeeded":void 0,voteAddition:(null==l?void 0:l.positiveCount)>0}}),layout:i,onReaction:n}),r.createElement(Z,{reactionCount:l.negativeCount+t.negative,reactionType:"negative",action:"disliked",onReactionChange:u,lastClickedReactionType:l.lastClickedReactionType,config:ee(ee({},o),{},{initialReactionState:l.isInitialState&&{state:(null==l?void 0:l.negativeCount)>0?"succeeded":void 0,voteAddition:(null==l?void 0:l.negativeCount)>0||void 0}}),layout:i,onReaction:n}))}}}]);