"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9706],{70840:function(e,t,r){r.d(t,{Z:function(){return j}});var n=r(27378),i=r(68442),a=r(55336),o=r(61932),l=r(92371),s=r(81458),c=r(48063),d=r(64404),u=r(10796),g=r(67254),p=r(33866),h=r(93731),v=r(16108),m=r(38303),f=r(23084),y=r(87062),b=r(25252),w=r(28433),E=JSON.parse('{"en-GB":{"noJSMessage":"Sorry, this vote cannot be loaded. In order to vote you need to enable JavaScript in your browser.","signInHeading":"Join in and vote on this story","signInMessage":"Get involved in this story. See what others think too.","unavailableMessage":"This vote is currently unavailable. Please try refreshing the page or try again later."},"cy":{"noJSMessage":"Ymddiheuriadau, nid yw\'r bleidlais yma yn gallu cael ei llwytho. Er mwyn pleidleisio mae angen i chi ganiatáu JavaScript yn eich porwr.","signInHeading":"Ymunwch a phleidleisio ar y stori","signInMessage":"Byddwch â rhan yn y stori. Gweld beth mae eraill yn ei feddwl hefyd.","unavailableMessage":"Dyw\'r bleidlais yma ddim ar gael ar hyn o bryd. Ceisiwch adnewyddu\'r dudalen neu rhowch gynnig arall arni nes ymlaen."},"gd":{"noJSMessage":"Duilich, cha ghabh a\' bhòt a luchdachadh. Airson bhòtadh, feumaidh tu JavaScript a chur a dhol.","signInHeading":"Rach an sàs agus bhòt air an sgeulachd seo","signInMessage":"Theirig an sàs san sgeulachd seo. Faic dè tha daoine eile a\' smaointinn cuideachd.","unavailableMessage":"Chan eil a\' bhòt seo ri fhaotainn an-dràsta. Feuch an duilleag ùrachadh no feuch a-rithist an ceann greis."}}');function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(n,i)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){O(a,n,i,o,l,"next",e)}function l(e){O(a,n,i,o,l,"throw",e)}o(void 0)}))}}var x=(0,i.default)("p",{target:"e15e1xc13",label:"NoJSPanel"})(a.eV,";",o.oV,";padding:",l.SPACING_8," 0;"),k=(0,i.default)("p",{target:"e15e1xc12",label:"ErrorPanel"})(a.eV,";",o.oV,";padding:",l.SPACING_8," 0;"),R=(0,i.default)("div",{target:"e15e1xc11",label:"MessageWrapper"})("display:flex;flex-direction:column;gap:",l.SPACING_2,";"),_=(0,i.default)("div",{target:"e15e1xc10",label:"SignInWrapper"})("display:flex;flex-direction:column;align-items:flex-start;gap:",l.SPACING_4,";@media (min-width: ",s.TN,"){padding:0 ",l.SPACING_2,";}"),A=e=>{var{children:t,hasWrapper:r}=e;return r?n.createElement(c.Z,null,t):t},D=e=>{var{identityTokenExchangeUrl:t,isSignInRequired:r,setError:n,telescopeLibrary:i,voteId:a,wid:o,widgetEmbedUrl:l}=e,s={voteId:a,initialWidth:document.getElementById("telescope-vote-".concat(a))?document.getElementById("telescope-vote-".concat(a)).offsetWidth:0,childId:"telescope-vote-".concat(a),parentTitle:document.title,parentUrl:document.URL,region:"GB",isUK:!0,locale:"en_GB"},c=(e=>{var{encodedState:t,identityTokenExchangeUrl:r,isSignInRequired:n,setError:i,widgetEmbedUrl:a}=e,o={clientId:"telescope",nonce:"1111111114444",scope:"vote openid",state:t,redirectUri:a};try{if(n){var l=new URL(r);return Object.entries(o).forEach((e=>{var[t,r]=e;return l.searchParams.append(t,r)})),l.toString()}var s=new URL(a);return s.hash="state=".concat(t),s.toString()}catch(c){i("Error: creating telescope url")}return null})({encodedState:encodeURIComponent(JSON.stringify(s)),identityTokenExchangeUrl:t,isSignInRequired:r,setError:n,widgetEmbedUrl:l});if(c)try{i.loadApplication({id:"telescope-vote-".concat(a),url:c,method:"get",wid:o,custom_id:!!r})}catch(d){n("Error: loading telescope app")}},T={test:{environment:"test",telescopeLibraryUrl:"https://ssp-libraries-uktest.votenow.tv/tldr/tldr.min",widgetDataUrl:"https://widgetstate-uktest.votenow.tv/v3/state",widgetEmbedUrl:"https://ssp-app-uktest.votenow.tv/"},live:{environment:"live",telescopeLibraryUrl:"https://ssp-libraries-uk.votenow.tv/tldr/tldr.min",widgetDataUrl:"https://widgetstate-uk.votenow.tv/v3/state",widgetEmbedUrl:"https://ssp-app-uk.votenow.tv/"}},j=e=>{var{hasWrapper:t=!0,voteId:r,testData:i=!1,service:a,experienceResourceId:o}=e,[l,s]=(0,n.useState)(void 0),[{wid:S,isSignInRequired:U},O]=(0,n.useState)({wid:null,isSignInRequired:!1}),{pathname:j,search:B,hash:C}=(0,u.TH)(),{host:L,mode:M}=(0,g.B)(),N=(0,y.Qg)(),G=(0,p.Z)(),J="https://".concat(L).concat(j).concat(B).concat(C),{identityTokenExchangeUrl:q,isSignInAvailable:W,registerUrl:H,signInUrl:Z}=(0,h.Z)({ptrt:J,userOrigin:a}),{environment:V,telescopeLibraryUrl:K,widgetEmbedUrl:X,widgetDataUrl:F}=(e=>e?T.test:T.live)(i),Y=(0,d.V)(K);if(!r)throw new Error("Required parameter not provided: voteId");(0,n.useEffect)((()=>{if(U&&G){var e=function(){var e=P((function*(){var e=L&&L.endsWith(".com");try{yield(0,v.I)({environment:V,isDotCom:e})}catch(t){s("Error: calling ensureTokens")}}));return function(){return e.apply(this,arguments)}}();e()}}),[L,V,U,G]),(0,n.useEffect)((()=>{var e=function(){var e=P((function*(e){try{var t=yield fetch("".concat(F,"/").concat(e)),r=yield t.json(),n={wid:r.snapshot.data.wid,isSignInRequired:r.data.bbc_id.enabled};O(n)}catch(i){s("Error: fetching widget data")}}));return function(t){return e.apply(this,arguments)}}();e(r)}),[F,r]),(0,n.useEffect)((()=>{Y&&S&&(!U||U&&G)&&D({identityTokenExchangeUrl:q,isSignInRequired:U,setError:s,telescopeLibrary:Y,voteId:r,wid:S,widgetEmbedUrl:X})}),[Y,S,U,X,r,q,G]);var{noJSMessage:Q,signInHeading:z,signInMessage:$,unavailableMessage:ee}=(e=>E[e]||E["en-GB"])(N);if(U&&!W)return n.createElement(c.Z,null,n.createElement(k,null,ee));if(U&&!G){var te={groupName:"Sign in to vote",groupType:"experience article embed telescope"};return n.createElement(b.f,{trackClicks:!1,tracking:(0,w.XP)(I(I({},te),{},{type:"article",headline:"Sign in to vote",metadataStripItems:[{label:"Attribution",text:"BBC - Register"}]}))},(e=>{var{trackRef:t}=e;return n.createElement(_,{ref:t},n.createElement(R,null,n.createElement(m.Z,{fontScale:"headlineSmall",level:"2"},z),$),n.createElement(f.C,{registerUrl:H,signInUrl:Z,signInTracking:(0,w.XP)(I(I({},te),{},{itemType:"id-cta-sign-in",headline:"Sign in",url:Z,metadataStripItems:[{label:"Attribution",text:"BBC - Sign in"}],experienceResourceId:o})),registerTracking:(0,w.XP)(I(I({},te),{},{itemType:"id-cta-register",headline:"Register",url:H,metadataStripItems:[{label:"Attribution",text:"BBC - Register"}],experienceResourceId:o}))}))}))}return n.createElement(A,{hasWrapper:t},n.createElement("noscript",null,n.createElement(x,null,Q)),l?n.createElement(k,null,ee):n.createElement("div",{id:"telescope-vote-".concat(r)}))}}}]);