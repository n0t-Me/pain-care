"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8324],{55797:function(e,t,r){r.r(t),r.d(t,{default:function(){return kr}});var n=r(27378),o=r(73503),l=r(88725),a=r(92371),i=r(68442),s=r(10796),c=r(91582),u=r(57561),d=r(55336),m=function(e){var t,r,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null!=e&&e.current&&(null==e||null===(t=e.current)||void 0===t||t.focus({preventScroll:n}),n&&(null===(r=window)||void 0===r||r.scrollBy(0,0)))},p=()=>{var{hostname:e}=window.location;return e.includes("localhost")},v=(e,t)=>{var r=t?".com":".co.uk";return"https://".concat("live"===e?"audco.api.bbc":"audco.test.api.bbc").concat(r)},f=r(70316),g=r(890),h=r(61932),b=r(40),y=r(81458),C=r(67254),w=r(33866),E=r(16108);function x(e,t,r,n,o,l,a){try{var i=e[l](a),s=i.value}catch(ir){return void r(ir)}i.done?t(s):Promise.resolve(s).then(n,o)}var I=function(){var e,t=(e=function*(e){var{env:t,host:r,apiKey:n}=e,o=((e,t)=>{var r=v(e,t);return"".concat(r,"/sender/api/users/identity")})(t,r&&r.endsWith(".com"));try{var l=yield fetch(o,{method:"GET",cache:"no-store",credentials:"include",headers:{"x-api-key":n,"content-type":"application/json"}});return(yield l.json()).id}catch(ir){return ir}},function(){var t=this,r=arguments;return new Promise((function(n,o){var l=e.apply(t,r);function a(e){x(l,n,o,a,i,"next",e)}function i(e){x(l,n,o,a,i,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),P=I;function S(e,t,r,n,o,l,a){try{var i=e[l](a),s=i.value}catch(ir){return void r(ir)}i.done?t(s):Promise.resolve(s).then(n,o)}function k(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var l=e.apply(t,r);function a(e){S(l,n,o,a,i,"next",e)}function i(e){S(l,n,o,a,i,"throw",e)}a(void 0)}))}}var R=(0,n.createContext)(""),_=e=>{var{children:t,policy:r,subtheme:o}=e,[l,a]=(0,n.useState)(""),[i,c]=(0,n.useState)(""),[u,d]=(0,n.useState)(""),[m,p]=(0,n.useState)(""),[v,f]=(0,n.useState)(""),[g,h]=(0,n.useState)(!1),{apiKey:b,host:y,env:x,language:I}=(0,C.B)(),S=(0,s.TH)(),_=encodeURIComponent("https://".concat(y).concat(null==S?void 0:S.pathname).concat(null!=S&&S.search?S.search:"").concat(null!=S&&S.hash?S.hash:"")),T=((e,t)=>{var r=e&&!e.endsWith(".com")?".co.uk":".com";return"https://".concat("live"===t?"idcta.api.bbc":"idcta.test.api.bbc").concat(r,"/idcta/init")})(y,x);return(0,n.useEffect)((()=>{if((0,w.Z)()){var e=function(){var e=k((function*(){var e="live"===x?"live":"test",t=y&&y.endsWith(".com");yield(0,E.I)({environment:e,isDotCom:t})}));return function(){return e.apply(this,arguments)}}();e()}}),[y,x]),(0,n.useEffect)((()=>{var e=function(){var e=k((function*(){try{var e=yield fetch("".concat(T,"?format=json&policy=").concat(r,"&lang=").concat(I,"&ptrt=").concat(_,"&context=").concat(o,"&renderMode=authorised"),{cache:"no-store",credentials:"include"}),t=yield e.json(),n=yield fetch(t.css),l=yield n.text(),i=((e,t)=>{var r=(new DOMParser).parseFromString(e,"text/html").querySelector("p").textContent.match(/You're signed in as (.+?)\. Sign out/);return r?(t(r[1]),null):e})(t.html,d);c(i),p(t.policyCheck),a(l);var s=yield P({env:x,host:y,apiKey:b});f(s)}catch(u){h(u)}}));return function(){return e.apply(this,arguments)}}();e()}),[T,I,_,r,o]),n.createElement(R.Provider,{value:{css:l,html:i,displayName:u,policyCheck:m,userId:v,error:g}},t)};var T=(0,i.default)("div",{target:"ejcdu9t1",label:"Greeting"})(h.o$," font-weight:400;margin-bottom:",a.SPACING_4,";"),N=(0,i.default)("a",{target:"ejcdu9t0",label:"DisplayName"})({name:"wbczqn",styles:"color:black;font-weight:700;text-decoration:none;:focus,:hover{text-decoration:underline;}"}),A=e=>{var{purpose:t,theme:r,accountUrl:o,trackRef:l}=e,{html:a,css:i,displayName:s,policyCheck:c}=(0,n.useContext)(R),u="childrens"===r?"Hey, ":"You're signed in, ";return n.createElement(n.Fragment,null,n.createElement("style",null,i),s&&!c?n.createElement(T,null,u,n.createElement(N,{href:o,ref:l},s)):n.createElement(n.Fragment,null,!c&&n.createElement(T,null,t),n.createElement("div",{className:"comments__idcta-btn",dangerouslySetInnerHTML:{__html:a}})))},L=r(41389),F=r(62385),O=r(6284),G=r(25252),Z={example:{track:{view:!1,clicks:!0},reverb:{view:!0,clicks:!1}},"view-comments":{track:{view:!0,clicks:!0}},"more-comments":{track:{view:!0,clicks:!0}},"more-comments-error":{track:{view:!0,clicks:!1}},"reaction-positive":{reverb:{clicks:!0}},"reaction-negative":{reverb:{clicks:!0}},"reaction-error":{reverb:{view:!0}},"comment-post":{reverb:{clicks:!0}},"comment-cancel":{reverb:{clicks:!0}},"comment-compose":{reverb:{clicks:!0}},"comment-input":{reverb:{view:!0}},"new-comments-load":{track:{view:!0,clicks:!0}},"more-replies-load":{track:{view:!0,clicks:!0}},"more-replies-check":{track:{view:!0,clicks:!0}},"more-replies-load-error":{track:{view:!0,clicks:!1}},"more-replies-check-error":{track:{view:!0,clicks:!1}},"back-to-top":{track:{view:!0,clicks:!0}},"removed-comment":{track:{view:!0,clicks:!0}},"sort-order":{track:{view:!0,clicks:!1},reverb:{view:!1,clicks:!0}},"sort-order-error":{track:{view:!0,clicks:!1}},"activity-hub-link":{track:{view:!0,clicks:!0}}},D=function(){return{container:"Comments",label:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",variant:"",metadata:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},source:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",url:arguments.length>3&&void 0!==arguments[3]?arguments[3]:""}},j=(e,t,r,n)=>{var o,l=D(e,t,r,n),a=null===(o=Z[e])||void 0===o?void 0:o.reverb,i=(null==a?void 0:a.view)&&"view",s=(null==a?void 0:a.clicks)&&"select"||i||"view";(0,G.G)(l,null,s)},z=e=>{var t,{id:r,metaData:o,viewKey:l,children:a,refCustomName:i,siteId:s,siteTitle:c}=e,u=l||Math.random(),d=null===(t=Z[r])||void 0===t?void 0:t.track,m=(null==d?void 0:d.view)||!1,p=(null==d?void 0:d.clicks)||!1,v=D(r,o,s,c);return n.createElement(G.f,{viewKey:u,tracking:v,trackView:m,trackClicks:p},(e=>{var{trackRef:t}=e;return(0,n.cloneElement)(a,i?{[i]:t}:{ref:t})}))};var M=(0,i.default)("div",{target:"e680l414",label:"SortWrapper"})({name:"m20zmp",styles:"display:flex;align-items:center;margin-right:40px"}),W=(0,i.default)("div",{target:"e680l413",label:"LoadingWrapper"})({name:"vds9k9",styles:"display:flex;justify-content:center;align-items:center;margin:-20px"}),H=(0,i.default)("div",{target:"e680l412",label:"LoadingContainer"})("width:",a.SPACING_4,";height:",a.SPACING_4,";padding:",a.SPACING_1,";position:absolute;background-color:white;"),B=(0,i.default)("div",{target:"e680l411",label:"LabelWrapper"})("margin-right:",a.SPACING_2,";"),V=(0,i.default)("div",{target:"e680l410",label:"DropdownWrapper"})("min-width:160px;pointer-events:",(e=>e.disabled?"none":"auto"),";select{font-size:inherit;height:revert;color:",(e=>e.disabled?"#b2b2b2":"#000"),";cursor:pointer;}"),U=[{label:"Latest",value:"NewestFirst"},{label:"Oldest",value:"OldestFirst"},{label:"Highest Rated",value:"HighestRated"},{label:"Most Replied",value:"MostRepliesFirst"}],Y=e=>{var{selected:t,onChange:r,hasError:o,isLoading:l,isDisabled:a,trackRef:i,siteId:s,siteTitle:c}=e,[u,d]=(0,n.useState)(),m=o?t:u||t;return n.createElement(M,null,n.createElement(B,null,n.createElement(L.ZP,{htmlFor:"sort-selector",labelText:"Show",isRequired:!0})),n.createElement(V,{disabled:a},n.createElement(F.Z,{id:"sort-selector",trackRef:i,options:U,selected:m,onChange:e=>{var t,n,o;j("sort-order",{ORD:null==e||null===(t=e.target)||void 0===t?void 0:t.value},s,c),d(null==e||null===(n=e.target)||void 0===n?void 0:n.value),r(null==e||null===(o=e.target)||void 0===o?void 0:o.value)}})),n.createElement(W,null,l&&n.createElement(H,null,n.createElement(O.Z,{type:"playback-avkx:loading"}))))},K=r(98187),q=r(59466),X=r(51663),$={cbbccomments:{urnStructure:"urn:bbc:isite2:file_id:cbbc:content-{id}",contentIdRegexp:/^__CBBC__comments__([a-zA-Z0-9_]+)$/,resourceType:"article"},ownit:{urnStructure:"urn:bbc:isite2:file_id:stay-safe:content-{id}",contentIdRegexp:/^ownit__([a-zA-Z0-9_]+)$/,resourceType:"article"},newsroundcommentsmodule:{urnStructure:"urn:bbc:cps::articleid:{id}",contentIdRegexp:/^__newsround__([0-9]+$)/,resourceType:"article"},sportcommentsmodule:{urnStructure:"urn:bbc:cps::articleid:{id}",contentIdRegexp:/^__CPS_([0-9]+$)/,resourceType:"article"},newscommentsmodule:{urnStructure:"urn:bbc:cps::articleid:{id}",contentIdRegexp:/^__CPS__([0-9]+)$/,resourceType:"article"},bbcthreecomments:{urnStructure:"urn:bbc:isite2:guid::{id}",contentIdRegexp:/^__BBCTHREE__comments__article_([a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12})$/,resourceType:"article"},blogsreactive:{urnStructure:"urn:bbc:isite2:guid::{id}",contentIdRegexp:/^blogs_[a-zA-Z0-9-]*_([a-zA-Z0-9]{8}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{12})$/,resourceType:"article"},blogspremoderated:{urnStructure:"urn:bbc:isite2:guid::{id}",contentIdRegexp:/^blogs_[a-zA-Z0-9-]*_([a-zA-Z0-9]{8}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{12})$/,resourceType:"article"},blogspostmoderated:{urnStructure:"urn:bbc:isite2:guid::{id}",contentIdRegexp:/^blogs_[a-zA-Z0-9-]*_([a-zA-Z0-9]{8}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{12})$/,resourceType:"article"},blogstrictlycomedancing:{urnStructure:"urn:bbc:isite2:guid::{id}",contentIdRegexp:/^blogs_[a-zA-Z0-9-]*_([a-zA-Z0-9]{8}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{12})$/,resourceType:"article"},blogbbccymru:{urnStructure:"urn:bbc:isite2:guid::{id}",contentIdRegexp:/^blogs_[a-zA-Z0-9-]*_([a-zA-Z0-9]{8}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{4}_[a-zA-Z0-9]{12})$/,resourceType:"article"}};function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e,t,r,n,o,l,a){try{var i=e[l](a),s=i.value}catch(ir){return void r(ir)}i.done?t(s):Promise.resolve(s).then(n,o)}var re=()=>{return"undefined"==typeof document?"":(e="og:title",((t=document.querySelector("meta[property='".concat(e,"']")))?t.getAttribute("content"):null)||document.title);var e,t},ne=(e,t)=>{if(!e||!e.contentIdRegexp||!e.urnStructure)throw new Error("uasInvalidSiteConfig");if(!t||0===t.length)throw new Error("uasMissingForumId");var{urnStructure:r}=e,n=((e,t)=>{var{contentIdRegexp:r}=e,n=t.match(r);if(!n||2!==n.length)throw new Error("uasCannotGetContentId");return n[1].replace(/_/g,"-")})(e,t);return r.replace(/\{id\}/,n)},oe=function(){var e,t=(e=function*(e,t){var{env:r,host:n,apiKey:o,forumId:l,embeddingPageTitle:a,embeddingPageUri:i}=e,s=((e,t)=>{var r=v(e,t);return"".concat(r,"/receiver/api/discussions")})(r,n&&n.endsWith(".com")),c=a||re(),u=i||("undefined"==typeof document?"":p()?"https://www.bbc.co.uk/":document.location.href),d=((e,t)=>{try{var r=$[e];return{uasResourceId:ne(r,t),uasResourceType:r.resourceType}}catch(ir){return{}}})(t,l);try{return yield fetch(s,{method:"POST",cache:"no-store",credentials:"include",headers:{"x-api-key":o,"content-type":"application/json"},body:JSON.stringify(Q({uid:l,title:c,parentUri:u},d))})}catch(ir){return ir}},function(){var t=this,r=arguments;return new Promise((function(n,o){var l=e.apply(t,r);function a(e){te(l,n,o,a,i,"next",e)}function i(e){te(l,n,o,a,i,"throw",e)}a(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),le=oe;function ae(e,t,r,n,o,l,a){try{var i=e[l](a),s=i.value}catch(ir){return void r(ir)}i.done?t(s):Promise.resolve(s).then(n,o)}var ie=function(){var e,t=(e=function*(e,t,r,n){var{env:o,host:l,apiKey:a,forumId:i}=e,s=l&&l.endsWith(".com"),c=((e,t,r)=>{var n=v(e,t);return"".concat(n,"/receiver/api/discussions/").concat(r,"/comments")})(o,s,i);try{return yield(0,E.I)({env:o,isDotCom:s}),r&&(yield le(e,n)),yield fetch(c,{method:"POST",cache:"no-store",credentials:"include",headers:{"x-api-key":a,"content-type":"application/json"},body:JSON.stringify(t)})}catch(ir){return ir}},function(){var t=this,r=arguments;return new Promise((function(n,o){var l=e.apply(t,r);function a(e){ae(l,n,o,a,i,"next",e)}function i(e){ae(l,n,o,a,i,"throw",e)}a(void 0)}))});return function(e,r,n,o){return t.apply(this,arguments)}}(),se=ie;function ce(e,t,r,n,o,l,a){try{var i=e[l](a),s=i.value}catch(ir){return void r(ir)}i.done?t(s):Promise.resolve(s).then(n,o)}var ue=function(){var e,t=(e=function*(e,t,r,n){var{env:o,host:l,apiKey:a,forumId:i}=e,s=l&&l.endsWith(".com"),c=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=v(e,t);return"".concat(l,"/receiver/api/discussions/").concat(r,"/comments/").concat(n,"/replies/").concat(o)}(o,s,i,r,n);try{return yield(0,E.I)({env:o,isDotCom:s}),yield fetch(c,{method:"POST",cache:"no-store",credentials:"include",headers:{"x-api-key":a,"content-type":"application/json"},body:JSON.stringify(t)})}catch(ir){return ir}},function(){var t=this,r=arguments;return new Promise((function(n,o){var l=e.apply(t,r);function a(e){ce(l,n,o,a,i,"next",e)}function i(e){ce(l,n,o,a,i,"throw",e)}a(void 0)}))});return function(e,r,n,o){return t.apply(this,arguments)}}(),de=ue;function me(e,t,r,n,o,l,a){try{var i=e[l](a),s=i.value}catch(ir){return void r(ir)}i.done?t(s):Promise.resolve(s).then(n,o)}var pe=(0,i.default)("div",{target:"e1b260140",label:"PostCommentWrapper"})("display:flex;margin-bottom:",a.SPACING_4,";#cancel-comment{margin-left:",a.SPACING_4,";:active,:focus,:hover{background:transparent;color:revert;box-shadow:none;outline-offset:unset;}}"),ve=e=>{var{comment:t,commentTextLimit:r,onClear:o,onPost:l,commentId:a,replyId:i,createForum:s,siteName:c,siteId:u,siteTitle:d,firstCancel:m,setFirstCancel:p}=e,[v,f]=(0,n.useState)(!1),g=(0,C.B)(),h=function(){var e,r=(e=function*(){f(!0),j("comment-post",{TYP:a?"reply":"comment",LNG:t.length},u,d);var e=a?yield de(g,t,a,i):yield se(g,t,s,c);if(f(!1),e.ok)l({success:!0});else try{var r=yield e.json();l({error:r.message})}catch(n){l({error:"Sorry, there was a problem. Please try again later."})}},function(){var t=this,r=arguments;return new Promise((function(n,o){var l=e.apply(t,r);function a(e){me(l,n,o,a,i,"next",e)}function i(e){me(l,n,o,a,i,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return t?n.createElement(pe,null,n.createElement(X.Z,{"aria-label":"Post your comment",type:"submit","data-testid":"post-comment",disabled:v||t.length>r,onClick:h},"Post"),n.createElement(X.Z,{"aria-label":"Clear your comment and cancel",emphasis:"low",id:"cancel-comment","data-testid":"cancel-comment",disabled:v,onClick:()=>{o(),m&&j("comment-cancel",{TYP:a?"reply":"comment",LNG:t.length},u,d),p(!1)}},"Cancel")):null};var fe=(0,i.default)("div",{target:"epk6d437",label:"CharacterCount"})(h.WM," color:",(e=>{var{count:t,theme:r}=e;return t<0?r.colourPalette.states.error:r.colourPalette.secondary}),";font-weight:",(e=>{var{count:t}=e;return t<0?"bold":"normal"}),";"),ge=(0,i.default)("div",{target:"epk6d436",label:"TextAreaFieldWrapper"})({name:"osy4rt",styles:"position:relative;width:100%;display:flex;flex-direction:column"}),he=(0,i.default)(K.Z,{target:"epk6d435",label:"TextAreaField"})("padding:",(0,b.s)(10),";resize:none;font-size:inherit;transition:height 0.5s ease-in-out;font-family:inherit;:focus-visible{outline:0.125rem solid ",(e=>{var{theme:t}=e;return t.colourPalette.states.interaction}),";outline-offset:revert;}"),be=(0,i.default)("div",{target:"epk6d434",label:"CommentActionsWrapper"})("display:flex;justify-content:space-between;margin-top:",a.SPACING_2,";"),ye=(0,i.default)("div",{target:"epk6d433",label:"PostCommentWrapper"})("margin-top:",a.SPACING_2,";"),Ce=(0,i.default)("div",{target:"epk6d432",label:"StatusMessage"})("margin-bottom:",a.SPACING_4,";",(e=>{var{isReply:t,theme:r}=e;return t&&"\n    padding-top: ".concat(a.SPACING_4,";\n    border-top: 1px solid ").concat(r.colourPalette.border,";\n  ")}),";"),we=(0,i.default)("div",{target:"epk6d431",label:"SuccessPanel"})(d.eV," background:",(e=>{var{theme:t}=e;return t.colourPalette.midground}),";padding:",a.SPACING_2,";display:flex;"),Ee=(0,i.default)("span",{target:"epk6d430",label:"SuccessIcon"})("margin-right:",a.SPACING_2,";color:",(e=>{var{theme:t}=e;return t.colourPalette.states.success}),";width:",(0,b.s)(20),";height:",(0,b.s)(20),";"),xe=e=>{var t,{moderationStatus:r,commentTextLimit:o,commentId:l,replyId:a,closeReplyFooter:i,createForum:s,siteName:c,siteId:u,siteTitle:d,firstInput:m,setFirstInput:p,firstView:v,setFirstView:f,firstCancel:g,setFirstCancel:h}=e,[b,y]=(0,n.useState)(""),[C,w]=(0,n.useState)(1),[E,x]=(0,n.useState)(""),I=(0,n.useRef)(null),P=o-b.length,S="pre-moderated"===r?"Thanks. We’ll check this as quickly as possible before posting.":"Thanks, your comment has been posted.";t=0===P?"You have reached the character limit.":P<0?"You're ".concat(P.toString().replace("-","")," characters over the limit."):"You have ".concat(P," characters remaining.");var k=()=>{x("")};return(0,n.useEffect)((()=>{v&&j("comment-input",{TYP:l?"reply":"comment"},u,d),f(!1)}),[a]),(0,n.useEffect)((()=>(E&&window.addEventListener("click",k),()=>{window.removeEventListener("click",k)})),[E]),n.createElement(ge,null,n.createElement("div",{"aria-live":"assertive"},E.error&&n.createElement(Ce,{"data-testid":"comment-error"},n.createElement(q.ZP,null,E.error)),E.success&&n.createElement(Ce,{id:"status-message-success",isReply:l,role:"status","data-testid":"comment-success"},n.createElement(we,null,n.createElement(Ee,null,n.createElement(O.Z,{type:"actions:confirm"})),S))),n.createElement(he,{minRows:C,maxRows:8,placeholder:"Add your comment...",onChange:e=>{y(e.target.value),m&&j("comment-compose",{TYP:l?"reply":"comment"},u,d),p(!1)},onFocus:()=>w(2),onBlur:()=>w(1),"aria-label":t,value:b,role:0===P?"alert":void 0,ref:I}),n.createElement(be,null,n.createElement(ye,null,n.createElement(ve,{comment:b,commentTextLimit:o,commentId:l,replyId:a,onClear:()=>{var e;l?i():(y(""),null==I||null===(e=I.current)||void 0===e||e.focus())},onPost:e=>{x(e),e.success&&y("")},createForum:s,siteName:c,siteId:u,siteTitle:d,firstCancel:g,setFirstCancel:h})),n.createElement(fe,{"aria-hidden":"true",count:P},P,"/",o)))},Ie=r(38303),Pe=()=>"\n  #section-heading {\n    background-color: #d31c70;\n    box-shadow: ".concat((0,b.s)(1)," ").concat((0,b.s)(1)," 0 0 rgba(0, 0, 0, 0.5);\n    color: white;\n    display: inline-block;\n    padding: ").concat(a.SPACING_1," ").concat(a.SPACING_2,";\n  }\n\n  #section-title {\n    background-color: #28215b;\n    box-shadow: ").concat((0,b.s)(5)," 0 0 0 #28215b;\n    color: white;\n    ").concat(d.ce,"\n    margin-bottom: ").concat(a.SPACING_4,";\n    max-width: max-content;\n    padding: ").concat(a.SPACING_1," ").concat(a.SPACING_2,";\n  }\n"),Se=e=>{var{theme:t}=e;return"\n  #section-heading {\n    color: ".concat(t.colourPalette.secondary,";\n    margin-bottom: ").concat(a.SPACING_2,";\n  }\n\n  #section-title {\n    margin-bottom: ").concat(a.SPACING_4,";\n    max-width: max-content;\n  }\n")},ke=(0,i.default)("div",{target:"e19xeonk0",label:"HeadingWrapper"})("margin-bottom:",a.SPACING_4,";",(e=>{var{themeName:t}=e;return"childrens"===t?Pe:Se}),";"),Re=e=>{var{theme:t,shouldGainFocus:r}=e,o="childrens"===t?"Your Comments":"Comments";return n.createElement(ke,{ref:r,themeName:t},n.createElement(Ie.Z,{level:"4",fontScale:"indexHeadlineSmall",isFocusable:!0,id:"section-heading"},o),n.createElement(Ie.Z,{level:"4",fontScale:"indexHeadlineMedium",isFocusable:!0,id:"section-title"},"Join the conversation"))},_e=(0,i.default)("div",{target:"e1efvmuj4",label:"CommentsHeaderWrapper"})(d.ce," ",h.oV," box-sizing:border-box;box-shadow:",(0,b.s)(3)," ",(0,b.s)(3)," ",(0,b.s)(3)," ",(0,b.s)(-2)," rgb(0 0 0 / 20%);border:",(0,b.s)(1)," solid ",(e=>{var{theme:t}=e;return(0,g.vq)((0,g.LN)((0,g.oo)(t.colourPalette.border),90))}),";border-radius:",a.SPACING_1,";margin-bottom:",a.SPACING_6,";padding:",a.SPACING_4,";background-color:white;"),Te=(0,i.default)("div",{target:"e1efvmuj3",label:"CommentsCountAndSort"})("display:flex;align-items:center;border-top:",(0,b.s)(1)," solid ",(e=>{var{theme:t}=e;return t.colourPalette.border}),";margin-top:",a.SPACING_4,";padding-top:",a.SPACING_4,";@media (max-width: ",y.Xo,"){flex-direction:column;align-items:flex-start;line-height:",a.SPACING_8,";}"),Ne=(0,i.default)("div",{target:"e1efvmuj2",label:"TotalCommentsText"})("flex-grow:1;",d.eV,";"),Ae=(0,i.default)("div",{target:"e1efvmuj1",label:"CommentsRules"})(d.eV," margin-top:",a.SPACING_3,";#houseRulesLink{text-decoration:none;:focus,:hover,:active{text-decoration:underline;color:",(e=>{var t,{theme:r}=e;return null==r||null===(t=r.colourPalette)||void 0===t?void 0:t.primary}),";}:visited{color:",(e=>{var t,{theme:r}=e;return null==r||null===(t=r.colourPalette)||void 0===t?void 0:t.primary}),";}}"),Le=(0,i.default)("div",{target:"e1efvmuj0",label:"ClosedMessage"})(d.eV,";"),Fe=e=>{var{commentTextLimit:t,commentsCount:r,commentsHeaderRef:o,createForum:l,houseRulesUrl:a,isClosed:i,moderationStatus:s,siteId:c,siteName:u,siteTitle:d,sortHasError:m,sortIsAllowed:p,sortIsDisabled:v,sortIsLoading:g,sortOnChange:h,sortSelected:b,theme:y}=e,w="comment".concat(1===r?"":"s"),E="".concat(r," ").concat(w),{displayName:x,policyCheck:I}=(0,n.useContext)(R),{env:P}=(0,C.B)(),S=(e=>"https://".concat("live"===e?"account.bbc.com":"account.test.bbc.com","/account/activity"))(P),[k,_]=(0,n.useState)(!0),[T,N]=(0,n.useState)(!0),[L,F]=(0,n.useState)(!0);return n.createElement(_e,null,n.createElement(Re,{theme:y,shouldGainFocus:o}),i?n.createElement(Le,null,"These comments are now closed."):n.createElement(n.Fragment,null,n.createElement(z,{id:"activity-hub-link",refCustomName:"trackRef",metaData:{ORD:S},viewKey:"activity-hub-link",siteId:c,siteTitle:d},n.createElement(A,{purpose:"Sign in to comment, reply and react",theme:y,accountUrl:S})),x&&!I&&n.createElement(xe,{moderationStatus:s,commentTextLimit:t,createForum:l,siteName:u,siteId:c,siteTitle:d,"data-testid":"comment-box",firstInput:k,setFirstInput:_,firstView:T,setFirstView:N,firstCancel:L,setFirstCancel:F}),n.createElement(Ae,null,"Comments must follow the"," ",n.createElement(f.Z,{id:"houseRulesLink",url:a},"house rules"),".")),n.createElement(Te,null,n.createElement(Ne,null,E),p&&r>0&&n.createElement(z,{id:"sort-order",refCustomName:"trackRef",metaData:{ORD:b},siteId:c,siteTitle:d,viewKey:b},n.createElement(Y,{selected:b,onChange:h,hasError:m,isLoading:g,isDisabled:v,siteId:c,siteTitle:d}))))},Oe=r(81212),Ge=r(49196),Ze=r(16803),De=r(67286),je=r(58469),ze=(0,i.default)(je.Z,{target:"e78u8910",label:"CommentLink"})("color:",(e=>{var{theme:t}=e;return t.colourPalette.hyperlink}),";text-decoration:none;:focus,:hover{text-decoration:underline;cursor:pointer;}"),Me=r(73845);var We=(0,i.default)("div",{target:"eg2cj764",label:"ErrorWrapper"})("align-items:start;display:flex;flex-direction:column;color:",(e=>{var{theme:t}=e;return t.colourPalette.secondary}),";"),He=(0,i.default)("div",{target:"eg2cj763",label:"ErrorTitleWrapper"})({name:"8lz3ce",styles:"display:flex;flex-direction:row;padding-bottom:0.5rem"}),Be=(0,i.default)("p",{target:"eg2cj762",label:"ErrorTitle"})({name:"rkiwex",styles:"font-size:1rem"}),Ve=(0,i.default)("span",{target:"eg2cj761",label:"IconWrapper"})({name:"n9tq",styles:"margin-right:0.3rem;height:1rem;width:1rem"}),Ue=(0,i.default)("p",{target:"eg2cj760",label:"ErrorText"})({name:"ol9ofu",styles:"font-size:0.875rem"}),Ye=e=>{var{error:t}=e,{title:r,message:o}=t;return n.createElement(We,null,n.createElement(He,null,n.createElement(Ve,null,n.createElement(O.Z,{type:"labels:warning"})),n.createElement(Be,null,r)),n.createElement(Ue,null,o))},Ke=(0,i.default)("div",{target:"ena9psq1",label:"MoreRepliesWrapper"})("display:flex;flex-direction:column;align-items:flex-start;border-top:1px solid ",(e=>{var{theme:t}=e;return t.colourPalette.border}),";margin-top:",(0,b.s)(16),";#moreReplies{font-size:",(0,b.s)(16),";margin-bottom:",(0,b.s)(4),";margin-top:",(0,b.s)(4),";min-height:0!important;outline-offset:0;padding-left:",(0,b.s)(0),";padding-right:",(0,b.s)(0),";color:",(e=>{var{theme:t}=e;return t.colourPalette.states.interaction}),";:focus,:hover{text-decoration:underline;box-shadow:0 0 0 0 ",(e=>{var t,{theme:r}=e;return null==r||null===(t=r.colourPalette)||void 0===t?void 0:t.background}),";background-color:",(e=>{var t,{theme:r}=e;return null==r||null===(t=r.colourPalette)||void 0===t?void 0:t.background}),";color:",(e=>{var{theme:t}=e;return t.colourPalette.states.interactionHover}),";}span{padding-left:",(0,b.s)(2),";}}"),qe=(0,i.default)("div",{target:"ena9psq0",label:"ErrorWrapper"})("font-weight:normal;margin-bottom:",(0,b.s)(16),";"),Xe=e=>{var{isCheckReplies:t=!1,moreRepliesCount:r,onClick:o,isLoading:l,isDisabled:a,hasError:i,trackRef:s,nextRepliesPageCount:c,siteId:u,siteTitle:d,commentId:m}=e,[p,v]=(0,n.useState)(0),f=t?"Check for new replies":"More replies (".concat(r,")"),g={title:t?"There was a problem checking for new replies.":"There was a problem loading more replies.",message:"Please try again."},h=l?"playback-avkx:loading":t?"actions:refresh":"arrows:chevron-down",b=t?"more-replies-check-error":"more-replies-load-error",y=t?{}:{PAG:c,RSC:r};return n.createElement(Ke,null,n.createElement(X.Z,{trackRef:s,id:"moreReplies",emphasis:"low",iconType:h,disabled:a,iconPosition:"end",alignContent:"start",onClick:()=>{v(p+1),o(t)}},f),n.createElement("div",{"aria-live":"assertive"},i&&n.createElement(z,{id:b,metaData:y,siteId:u,siteTitle:d,viewKey:"".concat(b,"_").concat(m,"_").concat(c,"_").concat(p)},n.createElement(qe,null,n.createElement(Ye,{error:g})))))},$e=(0,i.default)("div",{target:"el4c7sr6",label:"ParentWrapper"})("line-height:",(0,b.s)(16),";white-space:nowrap;display:flex;font-size:",(0,b.s)(13),";padding-bottom:",a.SPACING_2,";"),Je=(0,i.default)("button",{target:"el4c7sr5",label:"SnippetWrapper"})("color:",(e=>{var{theme:t}=e;return t.colourPalette.states.interaction}),";max-width:50%;line-height:",(0,b.s)(16),";white-space:nowrap;display:flex;overflow:auto;@media (min-width: ",y.TN,"){max-width:33%;}:focus,:hover{color:",(e=>{var{theme:t}=e;return t.colourPalette.states.interactionHover}),";#snippet-text{text-decoration:underline;}}"),Qe=(0,i.default)("p",{target:"el4c7sr4",label:"SnippetAuthor"})(d.eV,";margin-right:",a.SPACING_1,";color:#666;font-style:italic;font-weight:light;max-width:33%;line-height:",(0,b.s)(16),";overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"),et=(0,i.default)("div",{target:"el4c7sr3",label:"SnippetText"})(d.ce,";white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis;"),tt=(0,i.default)("div",{target:"el4c7sr2",label:"ExpandedWrapper"})("padding:",a.SPACING_2," ",a.SPACING_2,";background-color:#f5f5f5;"),rt=(0,i.default)("div",{target:"el4c7sr1",label:"ExpandedBox"})("padding-bottom:",a.SPACING_2,";"),nt=(0,i.default)("p",{target:"el4c7sr0",label:"SnippetExpanded"})(d.eV,";line-height:",(0,b.s)(24),";width:100%;overflow-wrap:break-word;word-wrap:break-word;"),ot=e=>{var{parentComment:t}=e,{author:r,text:o}=t,[l,a]=(0,n.useState)(!1),i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/(<([^>]+)>)/gi," ");return(e=e.replace(/&nbsp;|&nbsp/gi," ").trim()).replace(/\s+/gi," ").trim()}(o),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.length>t){var r=e.slice(0,t+1);return r.slice(0,Math.min(r.length,r.lastIndexOf(" ")))}return e}(i,50);return n.createElement(n.Fragment,null,n.createElement($e,null,n.createElement(Qe,{"aria-hidden":"true"},"to ".concat(null==r?void 0:r.displayName)),n.createElement(Je,{"aria-label":"replying to ".concat(null==r?void 0:r.displayName," ").concat(s),"aria-expanded":l?"true":"false",onClick:()=>a(!l)},n.createElement("div",null,'"'),n.createElement(et,{id:"snippet-text",dangerouslySetInnerHTML:{__html:i}}),n.createElement("div",null,'"'))),l&&n.createElement(rt,null,n.createElement(tt,null,n.createElement(nt,{dangerouslySetInnerHTML:{__html:o}}))))},lt=r(85433),at=r(20964);function it(e,t,r,n,o,l,a){try{var i=e[l](a),s=i.value}catch(ir){return void r(ir)}i.done?t(s):Promise.resolve(s).then(n,o)}var st=function(){var e,t=(e=function*(e,t,r,n){var{env:o,host:l,apiKey:a,forumId:i}=e,s=l&&l.endsWith(".com"),c=((e,t,r,n,o,l)=>{var a=v(e,t),i="negative"===n?"down":"",s=l?"/".concat(l,"/replies"):"";return"".concat(a,"/receiver/api/discussions/").concat(r,"/comments").concat(s,"/").concat(o,"/reactions/").concat(i)})(o,s,i,t,r,n);try{return yield(0,E.I)({env:o,isDotCom:s}),yield fetch(c,{method:"POST",cache:"no-store",credentials:"include",headers:{"x-api-key":a}})}catch(ir){return ir}},function(){var t=this,r=arguments;return new Promise((function(n,o){var l=e.apply(t,r);function a(e){it(l,n,o,a,i,"next",e)}function i(e){it(l,n,o,a,i,"throw",e)}a(void 0)}))});return function(e,r,n,o){return t.apply(this,arguments)}}(),ct=st;function ut(e,t,r,n,o,l,a){try{var i=e[l](a),s=i.value}catch(ir){return void r(ir)}i.done?t(s):Promise.resolve(s).then(n,o)}var dt=(0,i.default)("div",{target:"e16wsvuh6",label:"ReactionsContainer"})("top:",(0,b.s)(14),";margin-left:auto;display:flex;position:relative;"),mt=(0,i.default)("div",{target:"e16wsvuh5",label:"CommentFooterWrapper"})("display:flex;flex-wrap:wrap;justify-content:space-between;width:100%;align-items:flex-end;margin-bottom:",a.SPACING_4,";#footer-btn{font-size:revert;min-height:revert!important;background:none;border:none;box-shadow:none;outline:none;padding:0;margin-right:-8px;:focus,:hover{color:",(e=>{var{theme:t}=e;return t.colourPalette.states.interactionHover}),";}:focus-visible{",lt.kN,";}}"),pt=(0,i.default)("div",{target:"e16wsvuh4",label:"FooterExpanded"})("border-top:1px solid ",(e=>{var{theme:t}=e;return t.colourPalette.border}),";margin-top:",a.SPACING_4,";padding-top:",a.SPACING_4,";display:flex;justify-content:flex-end;width:100%;"),vt=(0,i.default)(je.Z,{target:"e16wsvuh3",label:"FooterLink"})(h.WM,";color:",(e=>{var{theme:t}=e;return t.colourPalette.states.interaction}),";text-decoration:none;cursor:pointer;:focus,:hover>*{text-decoration:underline;color:",(e=>{var{theme:t}=e;return t.colourPalette.states.interactionHover}),";}:focus-visible{",lt.kN,";}"),ft=(0,i.default)("span",{target:"e16wsvuh2",label:"FooterIcon"})("margin-right:",a.SPACING_2,";display:inline-block;vertical-align:-0.125em;width:14px;height:14px;"),gt=(0,i.default)("span",{target:"e16wsvuh1",label:"FooterTextBold"})(d.ce,";"),ht=(0,i.default)("span",{target:"e16wsvuh0",label:"FooterTextLight"})(d.eV,";"),bt=()=>n.createElement(A,{purpose:"Sign in to your BBC account to do this."}),yt=e=>{var{showCommentFooter:t,onClickReportButton:r,reportingId:o,ratings:l,commentId:a,parentCommentId:i,siteId:s,siteTitle:c}=e,u=p()?"https://test.bbc.co.uk/moderation/reports/".concat(o):"/moderation/reports/".concat(o),d=(0,C.B)(),m=function(){var e,t=(e=function*(e){var{reactionType:t}=e,r=yield ct(d,t,a,i);if(j("reaction-".concat(t),{TYP:i?"reply":"comment"},s,c),!r.ok)throw j("reaction-error",{ERR:r},s,c),new Error("Unable to send reaction - error ".concat(r))},function(){var t=this,r=arguments;return new Promise((function(n,o){var l=e.apply(t,r);function a(e){ut(l,n,o,a,i,"next",e)}function i(e){ut(l,n,o,a,i,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),{policyCheck:v}=(0,n.useContext)(R),f={isModalForced:()=>v||!(0,w.Z)(),customModal:bt};return n.createElement(mt,{id:"comment-footer-wrapper"},n.createElement(dt,null,n.createElement(at.Z,{ratings:l,onReaction:m,config:f,layout:{largeIcon:!1,iconSpacing:"small"}})),n.createElement(X.Z,{iconOnly:!0,iconType:"actions:more-vertical",emphasis:"low",id:"footer-btn",onClick:r,"aria-expanded":t},"Show comment links"),t&&n.createElement(pt,{id:"footer-expanded"},n.createElement(vt,{url:u,target:"_blank"},n.createElement(ft,null,n.createElement(O.Z,{type:"labels:warning"})),n.createElement(gt,null,"Report Comment"),n.createElement(ht,null," (opens a new tab)"))))};var Ct=(0,i.default)("div",{target:"ez6ib233",label:"RemovedCommentContent"})({name:"tgad8j",styles:"margin:0.75rem 0"}),wt=(0,i.default)("button",{target:"ez6ib232",label:"Button"})({name:"1uubrqa",styles:"font-size:inherit;:focus,:hover{cursor:pointer;text-decoration:underline;}"}),Et=(0,i.default)("div",{target:"ez6ib231",label:"CollapsiblePanel"})((e=>{var{showBorder:t,theme:r}=e;return t&&"\n      border-top: 1px solid ".concat(r.colourPalette.border,";\n      margin-top: 0.75rem;\n    ")}),";"),xt=(0,i.default)("div",{target:"ez6ib230",label:"CommentText"})({name:"snhben",styles:"font-weight:normal;margin-top:0.75rem"}),It=e=>{var{authorName:t,dateText:r,rulesPageUrl:o,trackRef:l,hasReplies:a,isParent:i}=e,[s,c]=(0,n.useState)(!1),u=!i||!a,d=s||i&&a,m=i&&!a;return n.createElement(Ct,{tabIndex:"-1","data-testid":"removed-comment-content"},u&&n.createElement(wt,{type:"button","aria-label":s?"Hide Removed Comment":"Show Removed Comment","aria-expanded":s,onClick:()=>c(!s),ref:l},"Removed Comment"),d&&n.createElement(Et,{"data-testid":"collapsible-panel",showBorder:m},n.createElement(Ze.Z,{legacySpacing:!0,authorName:t,dateText:r,isRemoved:!0,isReply:!i}),n.createElement(xt,null,"This comment was removed because it broke the rules. ",n.createElement(ze,{url:o},"Explain"))))},Pt=(0,i.default)("span",{target:"eyu9kny2",label:"ReplyButtonText"})("margin-left:",(0,b.s)(5),";"),St=(0,i.default)("button",{target:"eyu9kny1",label:"Button"})("display:flex;font-size:inherit;font-weight:inherit;align-items:inherit;color:",(e=>{var{theme:t}=e;return t.colourPalette.states.interaction}),";cursor:pointer;:focus,:hover{color:",(e=>{var{theme:t}=e;return t.colourPalette.states.interactionHover}),";}:focus ",Pt,",:hover ",Pt,"{text-decoration:underline;}"),kt=(0,i.default)("span",{target:"eyu9kny0",label:"IconWrapper"})("height:",a.SPACING_4,";width:",a.SPACING_4,";margin-top:",(0,b.s)(3),";"),Rt=e=>{var{onClick:t,expanded:r,replyTo:o,autofocus:l}=e,a=(0,n.useRef)(null),i="Reply to ".concat(o);return(0,n.useEffect)((()=>{l&&m(a)}),[l]),n.createElement(St,{ref:a,"aria-label":i,expanded:r,onClick:t},n.createElement(kt,null,n.createElement(O.Z,{type:"participate:comments"})),n.createElement(Pt,null,"Reply"))},_t=(0,i.default)("div",{target:"e18mju4i1",label:"ReplyInputContainer"})("background-color:",(e=>{var{theme:t}=e;return t.colourPalette.midground}),";padding:",a.SPACING_4,";padding-bottom:",a.SPACING_1,";"),Tt=(0,i.default)("p",{target:"e18mju4i0",label:"ReplyHeader"})("margin-bottom:",a.SPACING_4,";"),Nt=e=>{var{replyTo:t,moderationStatus:r,commentTextLimit:o,commentId:l,replyId:a,closeReplyFooter:i,siteId:s,siteTitle:c,firstInput:u,setFirstInput:d,firstView:m,setFirstView:p,firstCancel:v,setFirstCancel:f}=e;return n.createElement(_t,null,n.createElement(Tt,null,"Your reply to ",t),n.createElement(xe,{moderationStatus:r,commentTextLimit:o,commentId:l,replyId:a,closeReplyFooter:i,siteId:s,siteTitle:c,firstInput:u,setFirstInput:d,firstView:m,setFirstView:p,firstCancel:v,setFirstCancel:f}))},At=(0,i.default)("div",{target:"ey1yi8z2",label:"ReplyFooterWrapper"})("padding-bottom:",a.SPACING_4,";",(e=>e.isFirstReply&&"\n    border-left: 2px solid #006def;\n    padding-left: ".concat(a.SPACING_4,";\n  "))," ",(e=>!e.hasReplies&&"\n    padding-bottom: 0;\n    margin-bottom: ".concat(a.SPACING_4,";\n  "))," [class*='Greeting']{font-size:1rem;}"),Lt=(0,i.default)("div",{target:"ey1yi8z1",label:"Separator"})("border-bottom:1px solid ",(e=>{var{theme:t}=e;return t.colourPalette.border}),";margin-top:",a.SPACING_4,";"),Ft=(0,i.default)("div",{target:"ey1yi8z0",label:"IdctaComponentsWrapper"})("padding:",a.SPACING_4,";background-color:",(e=>{var{theme:t}=e;return t.colourPalette.midground}),";"),Ot=e=>{var{authorName:t,moderationStatus:r,commentTextLimit:o,isFirstReply:l,hasReplies:a,commentId:i,replyId:s,close:c,siteId:u,siteTitle:d,firstInput:m,setFirstInput:p,firstView:v,setFirstView:f,firstCancel:g,setFirstCancel:h}=e,{displayName:b,policyCheck:y}=(0,n.useContext)(R);return n.createElement(At,{isFirstReply:l,hasReplies:a,id:"reply-footer-wrapper"},b&&!y?n.createElement(Nt,{replyTo:t,moderationStatus:r,commentTextLimit:o,commentId:i,replyId:s,closeReplyFooter:c,siteId:u,siteTitle:d,firstInput:m,setFirstInput:p,firstView:v,setFirstView:f,firstCancel:g,setFirstCancel:h}):n.createElement(Ft,null,n.createElement(A,{purpose:"Sign in to comment, reply and react"})),l&&a&&n.createElement(Lt,null))};var Gt=(0,i.default)("span",{target:"e19zbeu0",label:"VisuallyHiddenSpan"})({name:"1r8mfef",styles:"height:1px;overflow:hidden;position:absolute;width:1px"}),Zt=e=>{var{children:t}=e;return n.createElement(Gt,null,t)},Dt=e=>{switch(!0){case e.reverse&&!e.isReply:return"top:".concat((0,b.s)(-4.8),";");case e.reverse&&e.isReply:return"top: revert;";default:return"top:".concat((0,b.s)(8),";")}},jt=(0,i.default)("div",{target:"eegijtz0",label:"FlagWrapper"})("left:",(e=>e.reverse?"revert":(0,b.s)(-6)),";right:",(e=>e.reverse?(0,b.s)(-6):"revert"),";margin-bottom:",(0,b.s)(4),";position:absolute;",Dt," &::after{border-left:",(0,b.s)(5.6)," solid transparent;border-top:",(0,b.s)(4)," solid #12294b;transform:",(e=>e.reverse?"scaleX(-1)":"revert"),";content:'';height:0;left:",(e=>e.reverse?(0,b.s)(38.4):"0"),";position:absolute;top:",(e=>e.reverse?(0,b.s)(18):(0,b.s)(17.6)),";width:0;}"),zt=e=>{var{reverse:t,isReply:r}=e;return n.createElement(jt,{"data-testid":"flag",reverse:t,isReply:r},n.createElement(Zt,{"aria-hidden":"true"},"Message from BBC"),n.createElement("svg",{width:"44px",height:"18px",viewBox:"0 0 44 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},n.createElement("g",{id:"flag-logo-default",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n.createElement("g",{id:"Award"},n.createElement("polygon",{id:"Clip-1851",fill:"#12294b",points:"0 0 44 0 44 19 0 19"}),n.createElement("g",{id:"Group-8",transform:"translate(5.000000, 4.000000)"},n.createElement("path",{d:"M32.0121875,6.77640625 L31.846875,6.87734375 C31.049375,7.36484375 30.180625,7.62609375 29.391875,7.62609375 C27.705,7.61953125 26.5921875,6.61890625 26.58875,5.16359375 C26.5903125,3.73953125 27.75125,2.68515625 29.3496875,2.68140625 C30.16375,2.68171875 30.90125,2.89265625 31.7771875,3.37328125 L31.9384375,3.46140625 L31.9384375,2.16078125 L31.8690625,2.13421875 C30.88125,1.74421875 30.11625,1.57078125 29.3603125,1.57078125 C28.191875,1.57078125 27.178125,1.95609375 26.455625,2.61109375 C25.7328125,3.26578125 25.305,4.19140625 25.3056243,5.25265625 C25.3056243,5.99234375 25.6109375,6.85984375 26.26375,7.54796875 C26.91625,8.23578125 27.9203125,8.73796875 29.2971875,8.73703256 L29.3021875,8.73703256 C30.4440625,8.73703256 31.2359375,8.48265625 31.951875,8.13015625 L32.0121875,8.09984375 L32.0121875,6.77640625 Z M23.7528125,10.0001562 L34.0596875,10.0001562 L34.0596875,0.30078125 L23.7528125,0.30078125 L23.7528125,10.0001562 Z M7.85813741,6.73078125 C7.86125,5.84921875 7.2740625,5.17984375 6.3353125,4.92296875 C6.5878125,4.79359375 6.78875,4.63515625 6.9353125,4.44203125 C7.1325,4.18296875 7.2253125,3.86546875 7.2253125,3.49609375 C7.2253125,3.04140625 7.046875,2.57796875 6.663125,2.23140625 C6.2790625,1.88515625 5.69625,1.66015625 4.9009375,1.66046842 L2.70375,1.66046842 L2.70375,8.64578125 L5.2803125,8.64578125 L5.281875,8.64578125 C6.2028125,8.64578125 6.848125,8.39671875 7.26375,8.02796875 C7.68,7.65953125 7.8584375,7.17578125 7.85813741,6.73078125 L7.85813741,6.73078125 Z M0,10.0001562 L10.3065625,10.0001562 L10.3065625,0.30078125 L0,0.30078125 L0,10.0001562 Z M6.2321875,5.92359375 C5.9965625,5.75578125 5.6196875,5.64859375 5.090625,5.64890557 L3.955,5.64890557 L3.955,7.55515625 L5.14375,7.55515625 C5.7346875,7.55515625 6.09125,7.41734375 6.2965625,7.23609375 C6.503125,7.05453125 6.5746875,6.82296875 6.575,6.59203125 C6.5734375,6.31390625 6.4671875,6.09265625 6.2321875,5.92359375 L6.2321875,5.92359375 Z M5.611875,4.30890625 C5.8328125,4.14828125 5.9396875,3.92390625 5.9421875,3.58515625 C5.9415625,3.35265625 5.874375,3.15390625 5.7078125,3.00546875 C5.539375,2.85671875 5.2546875,2.75109375 4.7953125,2.75078125 L3.955,2.75078125 L3.955,4.55796956 L4.5315625,4.55796956 C5.0315625,4.55828125 5.389375,4.46859375 5.611875,4.30890625 L5.611875,4.30890625 Z M19.7340775,6.73078125 C19.7375,5.84921875 19.1496875,5.17984375 18.2115625,4.92296875 C18.4646875,4.79359375 18.665,4.63515625 18.8121875,4.44203125 C19.00875,4.18296875 19.101875,3.86546875 19.10125,3.49609375 C19.101875,3.04140625 18.923125,2.57796875 18.539375,2.23140625 C18.1559375,1.88515625 17.5721875,1.66015625 16.7778125,1.66046842 L14.58,1.66046842 L14.58,8.64578125 L17.1575,8.64578125 L17.15875,8.64578125 C18.0784375,8.64578125 18.7246875,8.39671875 19.1396875,8.02796875 C19.555625,7.65953125 19.7340775,7.17578125 19.7340775,6.73078125 L19.7340775,6.73078125 Z M11.8759375,10.0001562 L22.1828125,10.0001562 L22.1828125,0.30078125 L11.8759375,0.30078125 L11.8759375,10.0001562 Z M17.488125,4.30890625 C17.7090625,4.14828125 17.8165625,3.92390625 17.8184375,3.58515625 C17.8178125,3.35265625 17.750625,3.15390625 17.5834375,3.00546875 C17.4159375,2.85671875 17.1303125,2.75109375 16.6721875,2.75078125 L15.83125,2.75078125 L15.83125,4.55796956 L16.4078125,4.55796956 C16.9078125,4.55828125 17.2659375,4.46859375 17.488125,4.30890625 L17.488125,4.30890625 Z M18.45125,6.59203125 C18.450625,6.82296875 18.379375,7.05453125 18.173125,7.23609375 C17.9675,7.41734375 17.6109375,7.55515625 17.019375,7.55515625 L15.83125,7.55515625 L15.83125,5.64890557 L16.9675,5.64890557 C17.49625,5.64859375 17.8728125,5.75578125 18.1084375,5.92359375 C18.3434375,6.09265625 18.4496875,6.31390625 18.45125,6.59203125 L18.45125,6.59203125 Z",id:"Fill-6",fill:"#FFFFFF"}))))))},Mt=(0,i.default)("div",{target:"e1y2pay61",label:"DistressMessageWrapper"})("background-color:#f5f5f5;margin-top:",(0,b.s)(10),";margin-bottom:",a.SPACING_4,";padding:",a.SPACING_4,";padding-top:",a.SPACING_8,";position:relative;"),Wt=(0,i.default)("p",{target:"e1y2pay60",label:"DistressMessageText"})(d.eV,";line-height:",(0,b.s)(24),";width:100%;overflow-wrap:break-word;word-wrap:break-word;"),Ht=e=>{var{text:t}=e;return n.createElement(Mt,null,n.createElement(zt,null),n.createElement(Wt,{dangerouslySetInnerHTML:{__html:t}}))};var Bt=(0,i.default)("div",{target:"etfy88f3",label:"ReplyBox"})("background-color:white;border-bottom:1px solid ",(e=>{var{theme:t}=e;return t.colourPalette.border}),";margin-bottom:",a.SPACING_4,";&:last-child{border-bottom:none;#footer-expanded{padding-bottom:0;}#comment-footer-wrapper{margin-bottom:0;}#reply-footer-wrapper{padding-bottom:0;margin-top:",a.SPACING_4,";}}"),Vt=(0,i.default)("div",{target:"etfy88f2",label:"FooterWrapper"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),Ut=(0,i.default)("div",{target:"etfy88f1",label:"FootersWrapper"})("display:flex;flex-direction:column-reverse;margin-top:",(e=>{var{isNotable:t}=e;return t?(0,b.s)(12):(0,b.s)(-44)}),";"),Yt=(0,i.default)("div",{target:"etfy88f0",label:"ReplyButtonWrapper"})("display:flex;margin-top:",a.SPACING_5,";min-height:",a.SPACING_5,";z-index:1;width:50%;"),Kt=e=>{var t,r,o,l,s,{moderationStatus:c,commentTextLimit:u,siteId:d,siteTitle:m,reply:p,getFirstLoadedReplyRef:v,rulesPageUrl:f,hasReplies:g,isClosed:h}=e,[b,y]=(0,n.useState)(!1),[C,w]=(0,n.useState)(!1),[E,x]=(0,n.useState)(!1),[I,P]=(0,n.useState)(!0),[S,k]=(0,n.useState)(!0),[_,T]=(0,n.useState)(!0),N=null==p||null===(t=p.author)||void 0===t?void 0:t.displayName,A=null==p||null===(r=p.author)||void 0===r?void 0:r.userId,L=null==p||null===(o=p.author)||void 0===o?void 0:o.description,F=null==p?void 0:p.text,O=null==p?void 0:p.id,G=(0,Oe.l)(null==p?void 0:p.dateCreated,void 0,{sameYear:"HH:mm d MMM",differentYear:"HH:mm d MMM yyyy"}),Z=null==p?void 0:p.status,D=(e=>(0,i.default)("div",{target:"etfy88f4",label:"ReplyBody"})("refer"===e&&"margin-bottom: ".concat(a.SPACING_4,";")," color:#000;font-weight:normal;margin-top:",a.SPACING_2,";overflow-wrap:break-word;word-wrap:break-word;"))(Z),j=null==p||null===(l=p.author)||void 0===l?void 0:l.avatarUrl,M=null==p||null===(s=p.author)||void 0===s?void 0:s.isNotable,{userId:W}=(0,n.useContext)(R);return n.createElement(Bt,null,"fail"===Z?n.createElement(z,{id:"removed-comment",refCustomName:"trackRef",metaData:{TYP:"reply"},siteId:d,siteTitle:m,viewKey:O},n.createElement(It,{authorName:N,dateText:G,rulesPageUrl:f})):n.createElement(n.Fragment,null,n.createElement(Ze.Z,{legacySpacing:!0,authorName:N,dateText:G,isReply:!0,commentRef:v(null==p?void 0:p.id),avatarImageUrl:j,authorDescription:L,authorIsCurrentUser:A===W,flag:M&&n.createElement(zt,{id:"flags",reverse:M,isReply:!0})}),n.createElement(ot,{parentComment:null==p?void 0:p.replyTo}),"refer"===Z?n.createElement(D,null,"We're just ",n.createElement(ze,{url:f},"double checking")," this comment."):n.createElement(n.Fragment,null,n.createElement(D,{dangerouslySetInnerHTML:{__html:F}}),null!=p&&p.distressMessage?n.createElement(Ht,{text:p.distressMessage.text}):n.createElement(Vt,null,n.createElement(Yt,null,!h&&n.createElement(Rt,{onClick:()=>{w(!1),y(!b),x(!1)},expanded:b,replyTo:N,autofocus:C})),n.createElement(Ut,{isNotable:M},b&&n.createElement(Ot,{hasReplies:g,authorName:N,moderationStatus:c,commentTextLimit:u,commentId:null==p?void 0:p.commentId,replyId:null==p?void 0:p.id,close:()=>{w(!0),y(!1)},siteId:d,siteTitle:m,firstInput:I,setFirstInput:P,firstView:S,setFirstView:k,firstCancel:_,setFirstCancel:T}),!M&&n.createElement(yt,{parentCommentId:null==p?void 0:p.commentId,reportingId:null==p?void 0:p.reportingId,ratings:null==p?void 0:p.rating,commentId:null==p?void 0:p.id,onClickReportButton:()=>{x(!E),y(!1)},showCommentFooter:E}))))))},qt=(0,i.default)("div",{target:"ex2692u0",label:"RepliesWrapper"})("margin-top:",(e=>{var{showReplyButtonFooter:t}=e;return t&&"-"}),a.SPACING_4,";"),Xt=e=>{var{commentData:t,repliesData:r,moreRepliesClick:o,moreRepliesIsLoading:l,moreRepliesIsDisabled:a,moreRepliesHasError:i,getFirstLoadedReplyRef:s,rulesPageUrl:c,parentStatus:u,commentTextLimit:d,moderationStatus:m,showReplyButtonFooter:p,hasReplies:v,isClosed:f,siteId:g,siteTitle:h,nextRepliesPageCount:b}=e,y=null==t?void 0:t.totalReplies,C=null==r?void 0:r.length,w=y-C,E=null==t?void 0:t.commentId;return n.createElement(n.Fragment,null,n.createElement(qt,{showReplyButtonFooter:p},n.createElement(Me.Z,null,r.map((e=>n.createElement(Kt,{hasReplies:v,key:null==e?void 0:e.id,reply:e,getFirstLoadedReplyRef:s,rulesPageUrl:c,commentTextLimit:d,moderationStatus:m,isClosed:f,siteId:g,siteTitle:h}))))),w>0&&n.createElement(z,{id:"more-replies-load",metaData:{PAG:b,RSC:w},viewKey:"more-replies-load_".concat(E,"_").concat(b),refCustomName:"trackRef",siteId:g,siteTitle:h},n.createElement(Xe,{hasError:i,moreRepliesCount:w,onClick:o,isLoading:l,isDisabled:a,nextRepliesPageCount:b,siteId:g,siteTitle:h,tabIndex:"0"})),w<1&&C>1&&"fail"!==u&&n.createElement(z,{id:"more-replies-check",viewKey:"more-replies-check_".concat(E),refCustomName:"trackRef",siteId:g,siteTitle:h},n.createElement(Xe,{commentId:E,isCheckReplies:!0,hasError:i,moreRepliesCount:w,onClick:o,isLoading:l,isDisabled:a,siteId:g,siteTitle:h,tabIndex:"0"})))};var $t=(0,i.default)("div",{target:"e126ob1s4",label:"CommentWrapper"})("margin-bottom:",a.SPACING_6,";"),Jt=(0,i.default)("div",{target:"e126ob1s3",label:"FooterWrapper"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),Qt=(0,i.default)("div",{target:"e126ob1s2",label:"FootersWrapper"})("display:flex;flex-direction:column-reverse;margin-top:",(e=>{var{isNotable:t}=e;return t?(0,b.s)(12):(0,b.s)(-44)}),";",(e=>{var{showReplyButtonFooter:t,hasReplies:r,theme:n}=e;return!t&&r&&"\n    border-bottom: 1px solid ".concat(n.colourPalette.border,";\n  ")}),";"),er=(0,i.default)("div",{target:"e126ob1s1",label:"ReplyButtonWrapper"})("display:flex;margin-top:",a.SPACING_5,";min-height:",a.SPACING_5,";z-index:1;width:50%;"),tr=(0,i.default)("div",{target:"e126ob1s0",label:"Separator"})("border-bottom:1px solid ",(e=>{var{theme:t}=e;return t.colourPalette.border}),";margin-top:",a.SPACING_4,";"),rr=e=>{var t,r,o,l,a,i,{commentData:s,repliesData:c,siteId:u,siteTitle:d,commentRef:m,moreRepliesClick:v,moreRepliesIsLoading:f,moreRepliesIsDisabled:g,moreRepliesHasError:h,getFirstLoadedReplyRef:b,rulesPageUrl:y,moderationStatus:C,commentTextLimit:w,isClosed:E,nextRepliesPageCount:x}=e,[I,P]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),[_,T]=(0,n.useState)(!1),[N,A]=(0,n.useState)(!0),[L,F]=(0,n.useState)(!0),[O,G]=(0,n.useState)(!0),Z=null==s||null===(t=s.author)||void 0===t?void 0:t.displayName,D=null==s||null===(r=s.author)||void 0===r?void 0:r.userId,j=null==s||null===(o=s.author)||void 0===o?void 0:o.description,M=null==s||null===(l=s.author)||void 0===l?void 0:l.avatarUrl,W=(0,Oe.l)(null==s?void 0:s.dateCreated,void 0,{sameYear:"HH:mm d MMM",differentYear:"HH:mm d MMM yyyy"}),H=null==s?void 0:s.text,B=null==s?void 0:s.rating,V=null==s?void 0:s.reportingId,U=(null==s||null===(a=s.replies)||void 0===a?void 0:a.length)>0,Y=null==s?void 0:s.id,K=null==s?void 0:s.status,q=p()?"https://bbc.co.uk".concat(y):y,X=null==s?void 0:s.distressMessage,$=null==s||null===(i=s.author)||void 0===i?void 0:i.isNotable,{userId:J}=(0,n.useContext)(R);return n.createElement($t,{key:Y},n.createElement(Ge.Z,{authorIsCurrentUser:D===J,legacySpacing:!0},"fail"===K?n.createElement(z,{id:"removed-comment",refCustomName:"trackRef",metaData:{TYP:"comment"},siteId:u,siteTitle:d,viewKey:Y},n.createElement(It,{authorName:Z,dateText:W,rulesPageUrl:q,hasReplies:U,isParent:!0,commentRef:!0,siteId:u,siteTitle:d})):n.createElement(n.Fragment,null,n.createElement(Ze.Z,{legacySpacing:!0,authorName:Z,dateText:W,commentRef:m,avatarImageUrl:M,authorDescription:j,authorIsCurrentUser:D===J,flag:$&&n.createElement(zt,{id:"flags",reverse:$,isReply:!1}),siteId:u,siteTitle:d}),"refer"===K?n.createElement(De.Z,{legacySpacing:"refer"===K},"We're just ",n.createElement(ze,{url:q},"double checking")," this comment."):n.createElement(n.Fragment,null,n.createElement(De.Z,{legacySpacing:"refer"===K,dangerouslySetInnerHTML:{__html:H}}),X?n.createElement(n.Fragment,null,n.createElement(Ht,{text:X.text}),U&&n.createElement(tr,null)):n.createElement(Jt,null,n.createElement(er,null,!E&&n.createElement(Rt,{onClick:()=>{k(!1),P(!I),T(!1)},expanded:I,replyTo:Z,autofocus:S})),n.createElement(Qt,{showReplyButtonFooter:I,hasReplies:U,isNotable:$},I&&n.createElement(Ot,{isFirstReply:!0,hasReplies:c.length>0,authorName:Z,moderationStatus:C,commentTextLimit:w,commentId:Y,close:()=>{k(!0),P(!1)},siteId:u,siteTitle:d,firstInput:N,setFirstInput:A,firstView:L,setFirstView:F,firstCancel:O,setFirstCancel:G}),!$&&n.createElement(yt,{reportingId:V,ratings:B,commentId:Y,onClickReportButton:()=>{T(!_),P(!1)},showCommentFooter:_,siteId:u,siteTitle:d}))))),U&&n.createElement(Xt,{hasReplies:c.length>0,moreRepliesHasError:h,commentData:s,repliesData:c,moreRepliesClick:v,moreRepliesIsLoading:f,moreRepliesIsDisabled:g,getFirstLoadedReplyRef:b,rulesPageUrl:q,parentStatus:K,moderationStatus:C,commentTextLimit:w,showReplyButtonFooter:I,isClosed:E,siteId:u,siteTitle:d,nextRepliesPageCount:x})))},nr=(0,i.default)("div",{target:"e1eu916e0",label:"BackToTopWrapper"})("display:flex;justify-content:center;padding:",a.SPACING_4," 0;#toTop{:focus,:hover,:active{text-decoration:underline;box-shadow:0 0 0 0 ",(e=>{var t,{theme:r}=e;return null==r||null===(t=r.colourPalette)||void 0===t?void 0:t.background}),";background-color:transparent;color:",(e=>{var t,{theme:r}=e;return null==r||null===(t=r.colourPalette)||void 0===t?void 0:t.primary}),";}}"),or=e=>{var{topRef:t,trackRef:r}=e;return n.createElement(nr,null,n.createElement(X.Z,{trackRef:r,id:"toTop",emphasis:"low",iconType:"arrows:to-top",width:"content-length",iconPosition:"end",alignContent:"center",onClick:()=>{var e,r,n;null!=(e=t)&&e.current&&(window.scrollTo({top:null==e||null===(r=e.current)||void 0===r?void 0:r.offsetTop,behavior:"auto"}),null==e||null===(n=e.current)||void 0===n||n.focus())}},"Back to top"))},lr=(0,i.default)("div",{target:"e17xm5ss1",label:"MoreCommentsWrapper"})("align-items:center;display:flex;flex-direction:column;justify-content:center;margin-bottom:",a.SPACING_4,";padding-top:",a.SPACING_4,";"),ar=(0,i.default)("div",{target:"e17xm5ss0",label:"ErrorWrapper"})("margin-top:",(0,b.s)(16),";"),ir={title:"There was a problem loading more comments.",message:"Please try again."},sr=e=>{var{hasError:t,isLoading:r,isDisabled:o,onClick:l,trackRef:a,commentsPage:i,sortOrder:s}=e;return n.createElement(lr,null,n.createElement(X.Z,{trackRef:a,iconType:r?"playback-avkx:loading":null,disabled:o,onClick:l},"More comments"),n.createElement("div",{"aria-live":"assertive"},t&&n.createElement(z,{id:"more-comments-error",metaData:{PAG:i,ORD:s}},n.createElement(ar,null,n.createElement(Ye,{error:ir})))))},cr=(0,i.default)("div",{target:"en3azda1",label:"ViewCommentsWrapper"})("margin-bottom:",a.SPACING_5,";"),ur=(0,i.default)("div",{target:"en3azda0",label:"ErrorWrapper"})("margin-top:",(0,b.s)(16),";"),dr={title:"There was a problem loading the comments.",message:"Please try again."},mr=e=>{var{hasError:t,isLoading:r,isDisabled:o,onClick:l,trackRef:a}=e;return n.createElement(cr,null,n.createElement(X.Z,{trackRef:a,iconType:r?"playback-avkx:loading":"participate:comments",disabled:o,onClick:l},"View comments"),n.createElement("div",{"aria-live":"assertive"},t&&n.createElement(ur,null,n.createElement(Ye,{error:dr}))))},pr=(e,t)=>{var r=(0,n.useRef)();(0,n.useEffect)((()=>{r.current=e}),[e]),(0,n.useEffect)((()=>{if(null!==t){var e=setInterval((function(){r.current()}),t);return()=>clearInterval(e)}return()=>{}}),[t])},vr=(0,i.default)("div",{target:"e1su61oq0",label:"ButtonWrapper"})("margin-bottom:",a.SPACING_4,";box-shadow:",(0,b.s)(3)," ",(0,b.s)(3)," ",(0,b.s)(3)," ",(0,b.s)(-2)," rgba(0, 0, 0, 0.2);border:",(0,b.s)(1)," solid ",(e=>{var{theme:t}=e;return(0,g.vq)((0,g.LN)((0,g.oo)(t.colourPalette.border),90))}),";#new-comments-button{color:",(e=>{var{theme:t}=e;return t.colourPalette.states.interaction}),";font-size:inherit;&:hover,&:focus{color:",(e=>{var{theme:t}=e;return t.colourPalette.states.onInteraction}),";}}"),fr=e=>{var{onClick:t,count:r,trackRef:o}=e,l="".concat(r,r>1?" new comments":" new comment"),a="Show ".concat(r,r>1?" new comments":" new comment");return r&&0!==r?n.createElement(vr,null,n.createElement(X.Z,{trackRef:o,id:"new-comments-button",iconType:"actions:refresh",emphasis:"low",width:"full",cornerFit:!0,onClick:t,"aria-label":a},l)):null};function gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(r),!0).forEach((function(t){br(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function br(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yr=(0,i.default)("div",{target:"exocmsy2",label:"CommentsModule"})(d.eV," margin:",a.SPACING_4," 0 ",a.SPACING_6," 0;padding-bottom:",a.SPACING_6,";",(e=>{var{isHarnessPage:t}=e;return!t&&"max-width: ".concat(o.q,";\n  ")}),";"),Cr=(0,i.default)("div",{target:"exocmsy1",label:"ErrorWrapper"})("display:flex;justify-content:center;margin:",a.SPACING_4,";"),wr=(0,i.default)("div",{target:"exocmsy0",label:"CommentsAnchor"})("position:relative;top:-",a.SPACING_4,";"),Er={initialData:"initialData",nextPageOfComments:"nextPageOfComments",nextPageOfReplies:"nextPageOfReplies",sortedComments:"sortedComments",newCommentsCheck:"newCommentsCheck"},xr=e=>{var t,r,o,l,a,i,d,p,v,f,{uri:g,data:h,error:b,siteId:y,siteTitle:C,setIsFirstDataRequested:w=(()=>null),setSince:E,setSortOrder:x,setNextToken:I,setPageSize:P,setCommentId:S,setLastReplyId:k,setRepliesCount:R,fetcherCallCount:T=0,setFetcherCallCount:N=(()=>null),initialCommentsData:A={comments:[]},initialCommentsPage:L=0,initialRepliesPage:F={},initialMoreRepliesCommentId:O,initialMoreRepliesFirstReplyId:G={},initialFetchType:Z=(null==Er?void 0:Er.initialData),simulateNewComments:D=!1}=e,[j,M]=(0,n.useState)(A),[W,H]=(0,n.useState)({}),[B,V]=(0,n.useState)({}),[U,Y]=(0,n.useState)(),[K,q]=(0,n.useState)(L),[X,$]=(0,n.useState)(F),[J,Q]=(0,n.useState)(!0),[ee,te]=(0,n.useState)(),[re,ne]=(0,n.useState)(O),[oe,le]=(0,n.useState)(G),[ae,ie]=(0,n.useState)({}),[se,ce]=(0,n.useState)({}),[ue,de]=(0,n.useState)(!1),[me,pe]=(0,n.useState)(Z),[ve,fe]=(0,n.useState)(),ge=(0,n.useRef)(null),he=(0,n.useRef)(null),be=(0,n.useRef)(null),ye=()=>(de(!0),N(T+1),pe(null==Er?void 0:Er.initialData),void w(!0)),Ce=()=>{var e,t=(null==B?void 0:B.comments)||[],r=null==j?void 0:j.comments,n=((null==j?void 0:j.totalCommentsCount)||0)+t.length,o=((null==j?void 0:j.totalPostsCount)||0)+t.length;M(hr(hr({},j),{},{comments:[...t,...r],totalCommentsCount:n,totalPostsCount:o})),V({}),Y(null==h||null===(e=h.comments)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.id)},we=(e,t)=>{var r;ce((r={posX:"undefined",posY:"undefined"},void 0!==window.pageXOffset?(r.posX=window.pageXOffset,r.posY=window.pageYOffset):void 0!==window.scrollX?(r.posX=window.scrollX,r.posY=window.scrollY):document.documentElement&&void 0!==document.documentElement.scrollLeft?(r.posX=document.documentElement.scrollLeft,r.posY=document.documentElement.scrollTop):(r.posX=document.body.scrollLeft,r.posY=document.body.scrollTop),r)),ne(null==e?void 0:e.id),t?(e=>{var t,r,n=null===(t=W[e.id])||void 0===t?void 0:t.length;de(!0),N(T+1),pe(null==Er?void 0:Er.nextPageOfReplies),I(ae[null==e?void 0:e.id]),P(10),S(null==e?void 0:e.id),R(n),k(null===(r=W[e.id])||void 0===r||null===(r=r[n-1])||void 0===r?void 0:r.id),x(null),E(null)})(e):(e=>{de(!0),N(T+1),pe(null==Er?void 0:Er.nextPageOfReplies),I(ae[null==e?void 0:e.id]),P(X[re]?10:11),S(null==e?void 0:e.id),R(null),k(null),x(null),E(null)})(e)},Ee=e=>{var t,r=(null==e?void 0:e.comments)||(null==j?void 0:j.comments);if(null!=h&&h.comments&&null!=h&&null!==(t=h.comments)&&void 0!==t&&t.length){var n=new Set(r.map((e=>e.id))),o=h.comments.filter((e=>!n.has(e.id)));V(hr(hr({},h),{},{comments:o}))}},xe=e=>X[re]&&oe[re]===e?be:null,Ie=()=>{var e,t,r,n=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=0;r<(null==t?void 0:t.length);r+=1){var n;if((null==t||null===(n=t[r])||void 0===n?void 0:n.id)===e)return null==t?void 0:t[r]}return null};if(null!=h&&null!==(e=h.replies)&&void 0!==e&&e.length){var o=()=>{var e,t=n(re,null==j?void 0:j.comments),r=null==t?void 0:t.replies[0],o=[...W[re]||[],...h.replies];null==h||null===(e=h.replies)||void 0===e||e.map((e=>{var l=null==e?void 0:e.inReplyToId;e.replyTo=((e,t,r,o)=>{if((null==e?void 0:e.id)===o)return{author:null==e?void 0:e.author,text:null==e?void 0:e.text};if((null==t?void 0:t.id)===o)return{author:null==t?void 0:t.author,text:null==t?void 0:t.text};var l=n(o,r);return{author:null==l?void 0:l.author,text:null==l?void 0:l.text}})(t,r,o,l)}))};X[re]?le(hr(hr({},oe),{},{[re]:null==h||null===(t=h.replies[0])||void 0===t?void 0:t.id})):le(hr(hr({},oe),{},{[re]:null==h||null===(r=h.replies[1])||void 0===r?void 0:r.id})),$(hr(hr({},X),{},{[re]:X[re]+1||1})),o(),H(hr(hr({},W),{},{[re]:[...W[re]||[],...h.replies]})),ie(hr(hr({},ae),{},{[re]:null==h?void 0:h.nextToken}))}},Pe=(0,n.useRef)(null),Se="comments",ke="comp-comments-button",Re=(0,s.TH)(),_e=Re.hash==="#".concat(Se)||Re.hash==="#".concat(ke),Te=b&&me===(null==Er?void 0:Er.sortedComments),Ne=(null==j||null===(t=j.comments)||void 0===t?void 0:t.length)>0,Ae=Ne,Le=null==j?void 0:j.canLoadMore,Oe=Ne,Ge=(null==h?void 0:h.includeComments)||b,Ze="/comments"===g;return(0,n.useEffect)((()=>{b&&de(!1)})),(0,n.useEffect)((()=>{switch(me){case null==Er?void 0:Er.initialData:case null==Er?void 0:Er.nextPageOfComments:null!=h&&h.comments&&(q(K+1),M(hr(hr({},h),{},{comments:[...null==j?void 0:j.comments,...null==h?void 0:h.comments]})),te(null==h||null===(e=h.comments[0])||void 0===e?void 0:e.id),Q(!1));break;case null==Er?void 0:Er.sortedComments:null!=h&&h.comments&&(V({}),q(L+1),M(h),H({}),$(F),ie({}));break;case null==Er?void 0:Er.nextPageOfReplies:Ie();break;case null==Er?void 0:Er.newCommentsCheck:Ee()}var e;de(!1)}),[null==h?void 0:h.fetcherSucessfulResponseCount]),(0,n.useEffect)((()=>{m(he)}),[ee,U]),(0,n.useEffect)((()=>{var e;m(be),e=se,setTimeout((()=>{window.scrollTo(e.posX,e.posY)}),10)}),[oe]),(0,n.useEffect)((()=>{_e&&setTimeout((()=>{var e;null===(e=Pe.current)||void 0===e||e.scrollIntoView(),ye()}),200)}),[_e]),pr((()=>{J||"NewestFirst"!==(null==j?void 0:j.sortOrder)||(N(T+1),pe(null==Er?void 0:Er.newCommentsCheck),I(null),P(null),S(null),R(null),k(null),x(null==j?void 0:j.sortOrder),E(null==j?void 0:j.totalCommentsCount))}),1e4),(0,n.useEffect)((()=>{D&&(Ce(),Ee(D))}),[D]),Ge&&n.createElement(n.Fragment,null,n.createElement(wr,{anchorId:Se,ref:Pe}),n.createElement(wr,{id:ke}),n.createElement(_,{policy:null==j||null===(r=j.idcta)||void 0===r?void 0:r.policy,subtheme:null==j||null===(o=j.config)||void 0===o?void 0:o.subtheme},n.createElement(yr,{"data-testid":"comments-container",isHarnessPage:Ze},J?n.createElement(z,{id:"view-comments",refCustomName:"trackRef",siteId:y,siteTitle:C},n.createElement(mr,{hasError:b&&me===(null==Er?void 0:Er.initialData),isLoading:ue&&me===(null==Er?void 0:Er.initialData),isDisabled:ue,onClick:ye})):n.createElement(c.a,{theme:(0,u.g)({servicePalette:"serviceNeutralLight",corePalette:"light",fontPalette:"sansSimple"})},n.createElement(Fe,{commentTextLimit:null==j?void 0:j.commentTextLimit,commentsCount:null==j?void 0:j.totalPostsCount,commentsHeaderRef:ge,createForum:null==j?void 0:j.createForum,houseRulesUrl:"https://www.bbc.co.uk".concat(null==j||null===(l=j.moderation)||void 0===l?void 0:l.rulesPageUrl),isClosed:null==j?void 0:j.isClosed,moderationStatus:null==j||null===(a=j.moderation)||void 0===a?void 0:a.status,siteId:y,siteName:null==j?void 0:j.siteName,siteTitle:C,sortHasError:b&&me===(null==Er?void 0:Er.sortedComments),sortIsAllowed:null==j||null===(i=j.config)||void 0===i||null===(i=i.featureToggles)||void 0===i?void 0:i.sort,sortIsDisabled:ue,sortIsLoading:ue&&me===(null==Er?void 0:Er.sortedComments),sortOnChange:e=>{fe(e),(e=>{de(!0),N(T+1),pe(null==Er?void 0:Er.sortedComments),I(null),P(null),S(null),R(null),k(null),x(e),E(null)})(e)},sortSelected:null==j?void 0:j.sortOrder,theme:null==j||null===(d=j.config)||void 0===d?void 0:d.theme}),Te&&n.createElement(z,{id:"sort-order-error",metaData:{ORD:ve},siteId:y,siteTitle:C},n.createElement(Cr,{"aria-live":"assertive"},n.createElement(Ye,{error:{title:"There was a problem loading the comments.",message:"Please try again."}}))),"NewestFirst"===(null==j?void 0:j.sortOrder)&&n.createElement(z,{id:"new-comments-load",refCustomName:"trackRef",metaData:{NCC:null==B||null===(p=B.comments)||void 0===p?void 0:p.length},siteId:y,siteTitle:C,viewKey:null==j?void 0:j.totalCommentsCount},n.createElement(fr,{onClick:Ce,count:null==B||null===(v=B.comments)||void 0===v?void 0:v.length})),Ae&&(null==j||null===(f=j.comments)||void 0===f?void 0:f.map((e=>{var t,r,o,l=null==e?void 0:e.replies;return null!=l&&l[0]&&(l[0].replyTo={author:null==e?void 0:e.author,text:null==e?void 0:e.text}),n.createElement(rr,{key:null==e?void 0:e.id,commentRef:(o=null==e?void 0:e.id,K>1&&ee===o||U===o?he:null),commentData:e,siteId:y,siteTitle:C,repliesData:W[e.id]||l,moreRepliesClick:t=>we(e,t),moreRepliesHasError:b&&me===(null==Er?void 0:Er.nextPageOfReplies)&&e.id===re,moreRepliesIsLoading:ue&&me===(null==Er?void 0:Er.nextPageOfReplies)&&e.id===re,moreRepliesIsDisabled:ue,getFirstLoadedReplyRef:xe,rulesPageUrl:null==j||null===(t=j.moderation)||void 0===t?void 0:t.rulesPageUrl,moderationStatus:null==j||null===(r=j.moderation)||void 0===r?void 0:r.status,commentTextLimit:null==j?void 0:j.commentTextLimit,isClosed:null==j?void 0:j.isClosed,nextRepliesPageCount:X[null==e?void 0:e.id]+1||1})}))),Le&&n.createElement(z,{id:"more-comments",refCustomName:"trackRef",metaData:{PAG:K,ORD:null==j?void 0:j.sortOrder},viewKey:"more-comments_".concat(K,"_").concat(null==j?void 0:j.sortOrder),siteId:y,siteTitle:C},n.createElement(sr,{commentsPage:K,sortOrder:null==j?void 0:j.sortOrder,hasError:b&&me===(null==Er?void 0:Er.nextPageOfComments),isLoading:ue&&me===(null==Er?void 0:Er.nextPageOfComments),isDisabled:ue,onClick:()=>(de(!0),N(T+1),pe(null==Er?void 0:Er.nextPageOfComments),I(null==j?void 0:j.nextToken),P(null),S(null),R(null),k(null),x(null==j?void 0:j.sortOrder),void E(null))})),Oe&&n.createElement(z,{id:"back-to-top",refCustomName:"trackRef",metaData:{PAG:K},viewKey:"back-to-top_".concat(K,"_").concat(null==j?void 0:j.sortOrder),siteId:y,siteTitle:C},n.createElement(or,{topRef:ge}))))))},Ir=["isCommentsContainerEnabled"];function Pr(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Sr=(0,i.default)("div",{target:"e1irrhux0",label:"CommentsWrapper"})("margin:",a.SPACING_2," ",(e=>{var{leftAligned:t}=e;return t?"0":"auto"})," ",a.SPACING_6," 0;max-width:",o.q,";padding-bottom:",a.SPACING_6,";"),kr=e=>{var{isCommentsContainerEnabled:t}=e,r=Pr(e,Ir),o=(0,s.TH)();if(!1===t){var{uri:a,data:i,env:c,host:u}=r,d=null==i?void 0:i.headline,m=null==i?void 0:i.assetUri;return(null==i?void 0:i.includeComments)?n.createElement(Sr,{leftAligned:r.isLeftAligned,"data-testid":"comments-component"},n.createElement(l.Z,{assetUri:a||m,assetTitle:d||"Join the conversation",meta:{env:c,host:u,location:o}})):null}return n.createElement(xr,r)}}}]);